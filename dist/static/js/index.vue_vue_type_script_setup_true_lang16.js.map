{"version":3,"file":"index.vue_vue_type_script_setup_true_lang16.js","sources":["../../../src/views/system/user/utils/rule.ts","../../../src/views/system/user/form/index.vue"],"sourcesContent":["import { reactive } from \"vue\";\nimport type { FormRules } from \"element-plus\";\nimport { isPhone, isEmail } from \"@pureadmin/utils\";\n\n/** 自定义表单规则校验 */\nexport const formRules = reactive(<FormRules>{\n  nickname: [{ required: true, message: \"用户昵称为必填项\", trigger: \"blur\" }],\n  username: [{ required: true, message: \"用户名称为必填项\", trigger: \"blur\" }],\n  password: [{ required: true, message: \"用户密码为必填项\", trigger: \"blur\" }],\n  phone: [\n    {\n      validator: (rule, value, callback) => {\n        if (value === \"\") {\n          callback();\n        } else if (!isPhone(value)) {\n          callback(new Error(\"请输入正确的手机号码格式\"));\n        } else {\n          callback();\n        }\n      },\n      trigger: \"blur\"\n      // trigger: \"click\" // 如果想在点击确定按钮时触发这个校验，trigger 设置成 click 即可\n    }\n  ],\n  email: [\n    {\n      validator: (rule, value, callback) => {\n        if (value === \"\") {\n          callback();\n        } else if (!isEmail(value)) {\n          callback(new Error(\"请输入正确的邮箱格式\"));\n        } else {\n          callback();\n        }\n      },\n      trigger: \"blur\"\n    }\n  ]\n});\n","<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport ReCol from \"@/components/ReCol\";\nimport { formRules } from \"../utils/rule\";\nimport { FormProps } from \"../utils/types\";\nimport { usePublicHooks } from \"../../hooks\";\n\nconst props = withDefaults(defineProps<FormProps>(), {\n  formInline: () => ({\n    title: \"新增\",\n    higherDeptOptions: [],\n    parentId: 0,\n    nickname: \"\",\n    username: \"\",\n    password: \"\",\n    phone: \"\",\n    email: \"\",\n    sex: \"\",\n    status: 1,\n    remark: \"\"\n  })\n});\n\nconst sexOptions = [\n  {\n    value: 0,\n    label: \"男\"\n  },\n  {\n    value: 1,\n    label: \"女\"\n  }\n];\nconst ruleFormRef = ref();\nconst { switchStyle } = usePublicHooks();\nconst newFormInline = ref(props.formInline);\n\nfunction getRef() {\n  return ruleFormRef.value;\n}\n\ndefineExpose({ getRef });\n</script>\n\n<template>\n  <el-form\n    ref=\"ruleFormRef\"\n    :model=\"newFormInline\"\n    :rules=\"formRules\"\n    label-width=\"82px\"\n  >\n    <el-row :gutter=\"30\">\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"用户昵称\" prop=\"nickname\">\n          <el-input\n            v-model=\"newFormInline.nickname\"\n            clearable\n            placeholder=\"请输入用户昵称\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"用户名称\" prop=\"username\">\n          <el-input\n            v-model=\"newFormInline.username\"\n            clearable\n            placeholder=\"请输入用户名称\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col\n        :value=\"12\"\n        :xs=\"24\"\n        :sm=\"24\"\n        v-if=\"newFormInline.title === '新增'\"\n      >\n        <el-form-item label=\"用户密码\" prop=\"password\">\n          <el-input\n            v-model=\"newFormInline.password\"\n            clearable\n            placeholder=\"请输入用户密码\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"手机号\" prop=\"phone\">\n          <el-input\n            v-model=\"newFormInline.phone\"\n            clearable\n            placeholder=\"请输入手机号\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input\n            v-model=\"newFormInline.email\"\n            clearable\n            placeholder=\"请输入邮箱\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"用户性别\">\n          <el-select\n            v-model=\"newFormInline.sex\"\n            placeholder=\"请选择用户性别\"\n            class=\"w-full\"\n            clearable\n          >\n            <el-option\n              v-for=\"(item, index) in sexOptions\"\n              :key=\"index\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            />\n          </el-select>\n        </el-form-item>\n      </re-col>\n\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"归属部门\">\n          <el-cascader\n            class=\"w-full\"\n            v-model=\"newFormInline.parentId\"\n            :options=\"newFormInline.higherDeptOptions\"\n            :props=\"{\n              value: 'id',\n              label: 'name',\n              emitPath: false,\n              checkStrictly: true\n            }\"\n            clearable\n            filterable\n            placeholder=\"请选择归属部门\"\n          >\n            <template #default=\"{ node, data }\">\n              <span>{{ data.name }}</span>\n              <span v-if=\"!node.isLeaf\"> ({{ data.children.length }}) </span>\n            </template>\n          </el-cascader>\n        </el-form-item>\n      </re-col>\n      <re-col\n        :value=\"12\"\n        :xs=\"24\"\n        :sm=\"24\"\n        v-if=\"newFormInline.title === '新增'\"\n      >\n        <el-form-item label=\"用户状态\">\n          <el-switch\n            v-model=\"newFormInline.status\"\n            inline-prompt\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            active-text=\"启用\"\n            inactive-text=\"停用\"\n            :style=\"switchStyle\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col>\n        <el-form-item label=\"备注\">\n          <el-input\n            v-model=\"newFormInline.remark\"\n            placeholder=\"请输入备注信息\"\n            type=\"textarea\"\n          />\n        </el-form-item>\n      </re-col>\n    </el-row>\n  </el-form>\n</template>\n"],"names":["formRules","reactive","rule","value","callback","isPhone","isEmail","sexOptions","ruleFormRef","ref","switchStyle","usePublicHooks","newFormInline","props","getRef","__expose"],"mappings":"qNAKO,MAAMA,EAAYC,EAAoB,CAC3C,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,OAAQ,EACnE,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,OAAQ,EACnE,SAAU,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,OAAQ,EACnE,MAAO,CACL,CACE,UAAW,CAACC,EAAMC,EAAOC,IAAa,CAChCD,IAAU,IAEFE,EAAQF,CAAK,EADdC,IAEAA,EAAA,IAAI,MAAM,cAAc,CAAC,CAItC,EACA,QAAS,MAEX,CACF,EACA,MAAO,CACL,CACE,UAAW,CAACF,EAAMC,EAAOC,IAAa,CAChCD,IAAU,IAEFG,EAAQH,CAAK,EADdC,IAEAA,EAAA,IAAI,MAAM,YAAY,CAAC,CAIpC,EACA,QAAS,MACX,CACF,CACF,CAAC,8NCfKG,EAAa,CACjB,CACE,MAAO,EACP,MAAO,GACT,EACA,CACE,MAAO,EACP,MAAO,GACT,CAAA,EAEIC,EAAcC,IACd,CAAE,YAAAC,GAAgBC,IAClBC,EAAgBH,EAAII,EAAM,UAAU,EAE1C,SAASC,GAAS,CAChB,OAAON,EAAY,KACrB,CAEa,OAAAO,EAAA,CAAE,OAAAD,EAAQ"}