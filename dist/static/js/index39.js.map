{"version":3,"file":"index39.js","sources":["../../../src/views/permission/page/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { initRouter } from \"@/router/utils\";\nimport { storageSession } from \"@pureadmin/utils\";\nimport { type CSSProperties, ref, computed } from \"vue\";\nimport { useUserStoreHook } from \"@/store/modules/user\";\nimport { usePermissionStoreHook } from \"@/store/modules/permission\";\n\ndefineOptions({\n  name: \"PermissionPage\"\n});\n\nconst elStyle = computed((): CSSProperties => {\n  return {\n    width: \"85vw\",\n    justifyContent: \"start\"\n  };\n});\n\nconst username = ref(useUserStoreHook()?.username);\n\nconst options = [\n  {\n    value: \"admin\",\n    label: \"管理员角色\"\n  },\n  {\n    value: \"common\",\n    label: \"普通角色\"\n  }\n];\n\nfunction onChange() {\n  useUserStoreHook()\n    .loginByUsername({ username: username.value, password: \"admin123\" })\n    .then(res => {\n      if (res.success) {\n        storageSession().removeItem(\"async-routes\");\n        usePermissionStoreHook().clearAllCachePage();\n        initRouter();\n      }\n    });\n}\n</script>\n\n<template>\n  <el-space direction=\"vertical\" size=\"large\">\n    <el-tag :style=\"elStyle\" size=\"large\" effect=\"dark\">\n      模拟后台根据不同角色返回对应路由，观察左侧菜单变化（管理员角色可查看系统管理菜单、普通角色不可查看系统管理菜单）\n    </el-tag>\n    <el-card shadow=\"never\" :style=\"elStyle\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>当前角色：{{ username }}</span>\n        </div>\n      </template>\n      <el-select v-model=\"username\" @change=\"onChange\">\n        <el-option\n          v-for=\"item in options\"\n          :key=\"item.value\"\n          :label=\"item.label\"\n          :value=\"item.value\"\n        />\n      </el-select>\n    </el-card>\n  </el-space>\n</template>\n"],"names":["elStyle","computed","username","ref","_a","useUserStoreHook","options","onChange","res","storageSession","usePermissionStoreHook","initRouter"],"mappings":"uPAWM,MAAAA,EAAUC,EAAS,KAChB,CACL,MAAO,OACP,eAAgB,OAAA,EAEnB,EAEKC,EAAWC,GAAIC,EAAAC,EAAiB,IAAjB,YAAAD,EAAoB,QAAQ,EAE3CE,EAAU,CACd,CACE,MAAO,QACP,MAAO,OACT,EACA,CACE,MAAO,SACP,MAAO,MACT,CAAA,EAGF,SAASC,GAAW,CACDF,IACd,gBAAgB,CAAE,SAAUH,EAAS,MAAO,SAAU,UAAY,CAAA,EAClE,KAAYM,GAAA,CACPA,EAAI,UACSC,EAAA,EAAE,WAAW,cAAc,EAC1CC,EAAA,EAAyB,oBACdC,IACb,CACD,CACL"}