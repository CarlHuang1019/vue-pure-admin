{"version":3,"file":"DialogForm.vue_vue_type_script_setup_true_lang.js","sources":["../../../src/views/list/card/components/DialogForm.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref, watch } from \"vue\";\nimport { message } from \"@/utils/message\";\nimport { FormInstance } from \"element-plus\";\n\nconst SELECT_OPTIONS = [\n  { label: \"网关\", value: 1 },\n  { label: \"人工智能\", value: 2 },\n  { label: \"CVM\", value: 3 },\n  { label: \"防火墙\", value: 4 },\n  { label: \"未知\", value: 5 }\n];\n\nconst props = defineProps({\n  visible: {\n    type: Boolean,\n    default: false\n  },\n  data: {\n    type: Object,\n    default: () => {\n      return {};\n    }\n  }\n});\n\nconst ruleFormRef = ref<FormInstance>();\n\nconst formVisible = ref(false);\nconst formData = ref(props.data);\nconst textareaValue = ref(\"\");\n\nconst submitForm = async (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  await formEl.validate(valid => {\n    if (valid) {\n      message(\"提交成功\", { type: \"success\" });\n      formVisible.value = false;\n      resetForm(formEl);\n    }\n  });\n};\n\nconst resetForm = (formEl: FormInstance | undefined) => {\n  if (!formEl) return;\n  formEl.resetFields();\n};\n\nconst closeDialog = () => {\n  formVisible.value = false;\n  resetForm(ruleFormRef.value);\n};\n\nconst emit = defineEmits([\"update:visible\"]);\nwatch(\n  () => formVisible.value,\n  val => {\n    emit(\"update:visible\", val);\n  }\n);\n\nwatch(\n  () => props.visible,\n  val => {\n    formVisible.value = val;\n  }\n);\n\nwatch(\n  () => props.data,\n  val => {\n    formData.value = val;\n  }\n);\n\nconst rules = {\n  name: [{ required: true, message: \"请输入产品名称\", trigger: \"blur\" }]\n};\n</script>\n\n<template>\n  <el-dialog\n    v-model=\"formVisible\"\n    title=\"新建产品\"\n    :width=\"680\"\n    draggable\n    :before-close=\"closeDialog\"\n  >\n    <!-- 表单内容 -->\n    <el-form\n      ref=\"ruleFormRef\"\n      :model=\"formData\"\n      :rules=\"rules\"\n      label-width=\"100px\"\n    >\n      <el-form-item label=\"产品名称\" prop=\"name\">\n        <el-input\n          v-model=\"formData.name\"\n          :style=\"{ width: '480px' }\"\n          placeholder=\"请输入产品名称\"\n        />\n      </el-form-item>\n      <el-form-item label=\"产品状态\" prop=\"status\">\n        <el-radio-group v-model=\"formData.status\">\n          <el-radio label=\"0\">已停用</el-radio>\n          <el-radio label=\"1\">已启用</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"产品描述\" prop=\"description\">\n        <el-input\n          v-model=\"formData.description\"\n          :style=\"{ width: '480px' }\"\n          placeholder=\"请输入产品描述\"\n        />\n      </el-form-item>\n      <el-form-item label=\"产品类型\" prop=\"type\">\n        <el-select\n          v-model=\"formData.type\"\n          clearable\n          :style=\"{ width: '480px' }\"\n        >\n          <el-option\n            v-for=\"(item, index) in SELECT_OPTIONS\"\n            :key=\"index\"\n            :value=\"item.value\"\n            :label=\"item.label\"\n          >\n            {{ item.label }}\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"mark\">\n        <el-input\n          v-model=\"textareaValue\"\n          type=\"textarea\"\n          :style=\"{ width: '480px' }\"\n          placeholder=\"请输入内容\"\n        />\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <el-button @click=\"closeDialog\">取消</el-button>\n      <el-button type=\"primary\" @click=\"submitForm(ruleFormRef)\">\n        确定\n      </el-button>\n    </template>\n  </el-dialog>\n</template>\n"],"names":["SELECT_OPTIONS","ruleFormRef","ref","formVisible","formData","props","textareaValue","submitForm","formEl","valid","message","resetForm","closeDialog","watch","val","emit","rules"],"mappings":"uRAKMA,EAAiB,CACrB,CAAE,MAAO,KAAM,MAAO,CAAE,EACxB,CAAE,MAAO,OAAQ,MAAO,CAAE,EAC1B,CAAE,MAAO,MAAO,MAAO,CAAE,EACzB,CAAE,MAAO,MAAO,MAAO,CAAE,EACzB,CAAE,MAAO,KAAM,MAAO,CAAE,CAAA,EAgBpBC,EAAcC,IAEdC,EAAcD,EAAI,EAAK,EACvBE,EAAWF,EAAIG,EAAM,IAAI,EACzBC,EAAgBJ,EAAI,EAAE,EAEtBK,EAAa,MAAOC,GAAqC,CACxDA,GACC,MAAAA,EAAO,SAAkBC,GAAA,CACzBA,IACFC,EAAQ,OAAQ,CAAE,KAAM,SAAW,CAAA,EACnCP,EAAY,MAAQ,GACpBQ,EAAUH,CAAM,EAClB,CACD,CAAA,EAGGG,EAAaH,GAAqC,CACjDA,GACLA,EAAO,YAAY,CAAA,EAGfI,EAAc,IAAM,CACxBT,EAAY,MAAQ,GACpBQ,EAAUV,EAAY,KAAK,CAAA,EAI7BY,EACE,IAAMV,EAAY,MACXW,GAAA,CACLC,EAAK,iBAAkBD,CAAG,CAC5B,CAAA,EAGFD,EACE,IAAMR,EAAM,QACLS,GAAA,CACLX,EAAY,MAAQW,CACtB,CAAA,EAGFD,EACE,IAAMR,EAAM,KACLS,GAAA,CACLV,EAAS,MAAQU,CACnB,CAAA,EAGF,MAAME,EAAQ,CACZ,KAAM,CAAC,CAAE,SAAU,GAAM,QAAS,UAAW,QAAS,OAAQ,CAAA"}