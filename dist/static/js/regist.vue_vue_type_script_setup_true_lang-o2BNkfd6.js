var P=(U,s,u)=>new Promise((f,r)=>{var c=d=>{try{m(u.next(d))}catch(g){r(g)}},C=d=>{try{m(u.throw(d))}catch(g){r(g)}},m=d=>d.done?f(d.value):Promise.resolve(d.value).then(c,C);m((u=u.apply(U,s)).next())});import{M as p}from"./motion-OgyLPMr2.js";import{d as N,H as T,r as k,M as z,b as _,e as A,c as D,w as o,i as e,db as y,a4 as w,h as l,B as v,g as V,f as F,A as B,du as H}from"./index-sjhPwUgm.js";import{u as R,a as I}from"./verifyCode-eTMYtz2L.js";import{u as x}from"./hooks-sYhc3nDF.js";import{d as S}from"./lock-fill-F0EFtWPf.js";import{d as Z}from"./iphone-hX6N5AWM.js";const j={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},q={class:"w-full flex justify-between"},X=N({__name:"regist",setup(U){const{t:s}=T(),u=k(!1),f=k(!1),r=z({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),c=k(),{isDisabled:C,text:m}=R(),d=[{validator:(b,a,n)=>{a===""?n(new Error(w(y("login.passwordSureReg")))):r.password!==a?n(new Error(w(y("login.passwordDifferentReg")))):n()},trigger:"blur"}],g=b=>P(this,null,function*(){f.value=!0,b&&(yield b.validate((a,n)=>{if(a)u.value?setTimeout(()=>{B(w(y("login.registerSuccess")),{type:"success"}),f.value=!1},2e3):(f.value=!1,B(w(y("login.tickPrivacy")),{type:"warning"}));else return f.value=!1,n}))});function $(){R().end(),H().SET_CURRENTPAGE(0)}return(b,a)=>{const n=_("el-input"),i=_("el-form-item"),h=_("el-button"),E=_("el-checkbox"),M=_("el-form");return A(),D(M,{ref_key:"ruleFormRef",ref:c,model:r,rules:e(I),size:"large"},{default:o(()=>[l(e(p),null,{default:o(()=>[l(i,{rules:[{required:!0,message:e(w)(e(y)("login.usernameReg")),trigger:"blur"}],prop:"username"},{default:o(()=>[l(n,{modelValue:r.username,"onUpdate:modelValue":a[0]||(a[0]=t=>r.username=t),clearable:"",placeholder:e(s)("login.username"),"prefix-icon":e(x)(e(j))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"])]),_:1}),l(e(p),{delay:100},{default:o(()=>[l(i,{prop:"phone"},{default:o(()=>[l(n,{modelValue:r.phone,"onUpdate:modelValue":a[1]||(a[1]=t=>r.phone=t),clearable:"",placeholder:e(s)("login.phone"),"prefix-icon":e(x)(e(Z))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:150},{default:o(()=>[l(i,{prop:"verifyCode"},{default:o(()=>[F("div",q,[l(n,{modelValue:r.verifyCode,"onUpdate:modelValue":a[2]||(a[2]=t=>r.verifyCode=t),clearable:"",placeholder:e(s)("login.smsVerifyCode"),"prefix-icon":e(x)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),l(h,{disabled:e(C),class:"ml-2",onClick:a[3]||(a[3]=t=>e(R)().start(c.value,"phone"))},{default:o(()=>[V(v(e(m).length>0?e(m)+e(s)("login.info"):e(s)("login.getVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),l(e(p),{delay:200},{default:o(()=>[l(i,{prop:"password"},{default:o(()=>[l(n,{modelValue:r.password,"onUpdate:modelValue":a[4]||(a[4]=t=>r.password=t),clearable:"","show-password":"",placeholder:e(s)("login.password"),"prefix-icon":e(x)(e(S))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:250},{default:o(()=>[l(i,{rules:d,prop:"repeatPassword"},{default:o(()=>[l(n,{modelValue:r.repeatPassword,"onUpdate:modelValue":a[5]||(a[5]=t=>r.repeatPassword=t),clearable:"","show-password":"",placeholder:e(s)("login.sure"),"prefix-icon":e(x)(e(S))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(p),{delay:300},{default:o(()=>[l(i,null,{default:o(()=>[l(E,{modelValue:u.value,"onUpdate:modelValue":a[6]||(a[6]=t=>u.value=t)},{default:o(()=>[V(v(e(s)("login.readAccept")),1)]),_:1},8,["modelValue"]),l(h,{link:"",type:"primary"},{default:o(()=>[V(v(e(s)("login.privacyPolicy")),1)]),_:1})]),_:1})]),_:1}),l(e(p),{delay:350},{default:o(()=>[l(i,null,{default:o(()=>[l(h,{class:"w-full",size:"default",type:"primary",loading:f.value,onClick:a[7]||(a[7]=t=>g(c.value))},{default:o(()=>[V(v(e(s)("login.definite")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),l(e(p),{delay:400},{default:o(()=>[l(i,null,{default:o(()=>[l(h,{class:"w-full",size:"default",onClick:$},{default:o(()=>[V(v(e(s)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{X as _,j as d};
