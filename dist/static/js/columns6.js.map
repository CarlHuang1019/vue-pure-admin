{"version":3,"file":"columns6.js","sources":["../../../src/views/pure-table/high/drag/column/columns.tsx"],"sourcesContent":["import Sortable from \"sortablejs\";\nimport { clone } from \"@pureadmin/utils\";\nimport { tableDataDrag } from \"../../data\";\nimport { ref, nextTick, onMounted } from \"vue\";\n\n// 列拖拽演示\nexport function useColumns() {\n  const dataList = ref(clone(tableDataDrag, true));\n\n  const columnsDrag = ref<TableColumnList>([\n    {\n      label: \"ID\",\n      prop: \"id\"\n    },\n    {\n      label: \"日期\",\n      prop: \"date\"\n    },\n    {\n      label: \"姓名\",\n      prop: \"name\"\n    }\n  ]);\n\n  const columns = ref<TableColumnList>([\n    {\n      label: \"ID\",\n      prop: index => columnsDrag.value[index].prop as string\n    },\n    {\n      label: \"日期\",\n      prop: index => columnsDrag.value[index].prop as string\n    },\n    {\n      label: \"姓名\",\n      prop: index => columnsDrag.value[index].prop as string\n    }\n  ]);\n\n  const columnDrop = (event: { preventDefault: () => void }) => {\n    event.preventDefault();\n    nextTick(() => {\n      const wrapper: HTMLElement = document.querySelector(\n        \".el-table__header-wrapper tr\"\n      );\n      Sortable.create(wrapper, {\n        animation: 300,\n        delay: 0,\n        onEnd: ({ newIndex, oldIndex }) => {\n          const oldItem = columnsDrag.value[oldIndex];\n          columnsDrag.value.splice(oldIndex, 1);\n          columnsDrag.value.splice(newIndex, 0, oldItem);\n        }\n      });\n    });\n  };\n\n  onMounted(() => {\n    nextTick(() => {\n      columnDrop(event);\n    });\n  });\n\n  return {\n    columns,\n    dataList,\n    columnsDrag\n  };\n}\n"],"names":["useColumns","dataList","ref","clone","tableDataDrag","columnsDrag","label","prop","columns","index","value","columnDrop","event","preventDefault","nextTick","wrapper","document","querySelector","Sortable","create","animation","delay","onEnd","newIndex","oldIndex","oldItem","splice","onMounted"],"mappings":"yHAMO,SAASA,GAAa,CAC3B,MAAMC,EAAWC,EAAIC,EAAMC,EAAe,EAAI,CAAC,EAEzCC,EAAcH,EAAqB,CACvC,CACEI,MAAO,KACPC,KAAM,IACR,EACA,CACED,MAAO,KACPC,KAAM,MACR,EACA,CACED,MAAO,KACPC,KAAM,MACP,CAAA,CACF,EAEKC,EAAUN,EAAqB,CACnC,CACEI,MAAO,KACPC,KAAME,GAASJ,EAAYK,MAAMD,CAAK,EAAEF,IAC1C,EACA,CACED,MAAO,KACPC,KAAME,GAASJ,EAAYK,MAAMD,CAAK,EAAEF,IAC1C,EACA,CACED,MAAO,KACPC,KAAME,GAASJ,EAAYK,MAAMD,CAAK,EAAEF,IACzC,CAAA,CACF,EAEKI,EAAcC,GAA0C,CAC5DA,EAAMC,eAAc,EACpBC,EAAS,IAAM,CACb,MAAMC,EAAuBC,SAASC,cACpC,8BACF,EACAC,EAASC,OAAOJ,EAAS,CACvBK,UAAW,IACXC,MAAO,EACPC,MAAOA,CAAC,CAAEC,SAAAA,EAAUC,SAAAA,CAAS,IAAM,CACjC,MAAMC,EAAUpB,EAAYK,MAAMc,CAAQ,EAC1CnB,EAAYK,MAAMgB,OAAOF,EAAU,CAAC,EACpCnB,EAAYK,MAAMgB,OAAOH,EAAU,EAAGE,CAAO,CAC/C,CACF,CAAC,CACH,CAAC,GAGHE,OAAAA,EAAU,IAAM,CACdb,EAAS,IAAM,CACbH,EAAWC,KAAK,CAClB,CAAC,CACH,CAAC,EAEM,CACLJ,QAAAA,EACAP,SAAAA,EACAI,YAAAA,EAEJ"}