{"version":3,"file":"index37.js","sources":["../../../src/views/login/utils/enums.ts","../../../src/assets/login/bg.png","../../../src/assets/login/avatar.svg?component","../../../src/assets/login/illustration.svg?component","../../../src/components/ReImageVerify/src/hooks.ts","../../../src/components/ReImageVerify/src/index.vue","../../../src/components/ReImageVerify/index.ts","../../../src/views/login/index.vue"],"sourcesContent":["import { $t } from \"@/plugins/i18n\";\n\nconst operates = [\n  {\n    title: $t(\"login.phoneLogin\")\n  },\n  {\n    title: $t(\"login.qRCodeLogin\")\n  },\n  {\n    title: $t(\"login.register\")\n  }\n];\n\nconst thirdParty = [\n  {\n    title: $t(\"login.weChatLogin\"),\n    icon: \"wechat\"\n  },\n  {\n    title: $t(\"login.alipayLogin\"),\n    icon: \"alipay\"\n  },\n  {\n    title: $t(\"login.qqLogin\"),\n    icon: \"qq\"\n  },\n  {\n    title: $t(\"login.weiboLogin\"),\n    icon: \"weibo\"\n  }\n];\n\nexport { operates, thirdParty };\n","export default \"__VITE_ASSET__1a550f6f__\"","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"32\",\n  height: \"32\",\n  class: \"icon\",\n  viewBox: \"0 0 1024 1024\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"#386BF3\",\n  d: \"M410.558.109c0 210.974-300.876 361.752-300.876 633.548 0 174.943 134.704 316.787 300.876 316.787s300.877-141.817 300.877-316.787C711.408 361.752 410.558 210.974 410.558.109z\"\n}, null, -1)\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"#C3D2FB\",\n  d: \"M613.469 73.665c0 211.055-300.877 361.914-300.877 633.547C312.592 882.156 447.296 1024 613.47 1024s300.876-141.817 300.876-316.788C914.29 435.58 613.469 284.72 613.469 73.665z\"\n}, null, -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"path\", {\n  fill: \"#303F5B\",\n  d: \"M312.592 707.212c0-183.713 137.636-312.171 226.723-441.39 81.702 106.112 172.12 218.74 172.12 367.726A309.755 309.755 0 0 1 420.36 950.064a323.114 323.114 0 0 1-107.769-242.852z\"\n}, null, -1)\nconst _hoisted_5 = [\n  _hoisted_2,\n  _hoisted_3,\n  _hoisted_4\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_5))\n}\nexport default { render: render }","import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createStaticVNode as _createStaticVNode } from \"vue\"\n\nconst _hoisted_1 = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: \"500\",\n  height: \"380\",\n  \"data-name\": \"Layer 1\",\n  viewBox: \"0 0 871 477\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createStaticVNode(\"<path fill=\\\"#f2f2f2\\\" d=\\\"M158.585 473.32A141.78 141.78 0 0 1 52.532 333.926c.122-7.912.954-15.99 4.28-23.17s9.504-13.39 17.232-15.092c8.434-1.856 17.333 1.94 23.618 7.861s10.407 13.736 14.198 21.495c22.838 46.734 40.19 96.88 46.686 148.489Z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m70.217 297.224 16.006 36.367 16.007 36.367c5.069 11.517 10.128 23.04 15.368 34.481 5.193 11.341 10.565 22.604 16.295 33.684 5.722 11.065 11.804 21.95 18.405 32.516q1.233 1.973 2.49 3.932c.58.904 2.03.065 1.446-.846-6.728-10.487-12.927-21.305-18.741-32.323-5.82-11.03-11.261-22.258-16.5-33.575-5.268-11.377-10.332-22.846-15.384-34.32L89.661 337.27l-16.006-36.367-1.992-4.525c-.433-.985-1.876-.133-1.446.845Z\\\"></path><path fill=\\\"#f2f2f2\\\" d=\\\"M151.908 473.573a82.967 82.967 0 0 1-92.692-43.741c-2.073-4.14-3.822-8.56-4.033-13.185s1.32-9.518 4.872-12.487c3.878-3.24 9.523-3.673 14.385-2.295s9.11 4.322 13.174 7.327c24.473 18.098 47.02 39.449 64.325 64.49Z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m58.49 406.002 18.127 14.56 18.128 14.56c5.741 4.612 11.479 9.228 17.288 13.754 5.758 4.486 11.587 8.883 17.553 13.09 5.958 4.199 12.054 8.208 18.334 11.912q1.173.692 2.354 1.369c.546.313 1.072-.514.523-.83-6.324-3.628-12.463-7.57-18.457-11.722-6-4.155-11.855-8.515-17.63-12.977-5.806-4.484-11.532-9.072-17.252-13.666q-9.032-7.252-18.062-14.507l-18.128-14.56-2.256-1.812c-.49-.394-1.01.438-.522.83Z\\\"></path><path fill=\\\"#f2f2f2\\\" d=\\\"M720.281 472.41a197.72 197.72 0 0 0 147.895-194.391c-.17-11.034-1.33-22.299-5.968-32.312s-13.254-18.673-24.03-21.045c-11.762-2.59-24.173 2.703-32.938 10.962s-14.512 19.155-19.8 29.976c-31.848 65.172-56.045 135.102-65.105 207.072Z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m843.513 226.836-22.32 50.715-22.322 50.716c-7.07 16.061-14.125 32.13-21.431 48.086-7.243 15.815-14.734 31.52-22.725 46.973-7.98 15.43-16.46 30.61-25.666 45.344q-1.72 2.752-3.473 5.483c-.81 1.261-2.832.092-2.017-1.178 9.382-14.626 18.028-29.712 26.136-45.077 8.117-15.383 15.704-31.04 23.01-46.82 7.346-15.867 14.409-31.861 21.453-47.863q11.122-25.265 22.24-50.531l22.321-50.715 2.778-6.312c.604-1.372 2.617-.185 2.016 1.179Z\\\"></path><path fill=\\\"#f2f2f2\\\" d=\\\"M729.593 472.762a115.7 115.7 0 0 0 129.262-60.998c2.89-5.775 5.33-11.937 5.625-18.387s-1.84-13.273-6.795-17.414c-5.407-4.52-13.28-5.122-20.06-3.2s-12.706 6.027-18.372 10.217c-34.13 25.239-65.57 55.013-89.704 89.933Z\\\"></path><path fill=\\\"#fff\\\" d=\\\"m859.868 378.532-25.28 20.305-25.28 20.305c-8.006 6.43-16.007 12.868-24.108 19.18-8.03 6.255-16.159 12.387-24.48 18.252-8.308 5.857-16.809 11.448-25.566 16.613q-1.636.965-3.284 1.91c-.76.436-1.494-.717-.728-1.157 8.82-5.06 17.38-10.559 25.738-16.347 8.367-5.795 16.533-11.876 24.586-18.097 8.097-6.254 16.082-12.652 24.06-19.058q12.594-10.114 25.187-20.23l25.28-20.305 3.146-2.527c.684-.55 1.409.61.729 1.156Z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"M215.933 146.87v.01l-8.34 6.97-57.35 12.74a14.497 14.497 0 1 0 10.87 26.88l36.53-6.15a44.821 44.821 0 0 0 5.98-1.42c.77-.23 1.53-.49 2.28-.76a233.32 233.32 0 0 1 13.62-41.26Z\\\"></path><path fill=\\\"#a0616a\\\" d=\\\"m692.273 182.07-7.95-.05-4.25-.02-24.35-42.57a11.93 11.93 0 0 0 .53-1.37c2.71-8.36-4.44-14.11-11.25-13.99a9.838 9.838 0 0 0-2.3.27 234.216 234.216 0 0 1 26.57 78.16 13.584 13.584 0 0 0 2.11.42 45.065 45.065 0 0 0 11.14-.38c4.96-.63 9.65-1.52 12.15-1.33Z\\\"></path><path fill=\\\"#5392f0\\\" d=\\\"m718.483 182.88-29.22-4.06a4.505 4.505 0 0 0-4.94 3.2 4.585 4.585 0 0 0-.14.64l-2.34 16.83a4.527 4.527 0 0 0 3.83 5.08l29.22 4.06a13 13 0 1 0 3.59-25.75Z\\\"></path><path fill=\\\"#3f3d56\\\" d=\\\"M671.383 202.92a235.262 235.262 0 0 0-26.38-78.85 238.286 238.286 0 0 0-429.07 22.8v.01a234.621 234.621 0 0 0-12.31 39.02 239.915 239.915 0 0 0-5.69 52.1 238 238 0 0 0 476 0 241.448 241.448 0 0 0-2.55-35.08ZM435.933 474c-130.13 0-236-105.87-236-236a234.593 234.593 0 0 1 19.59-94.12C255.943 60.45 339.243 2 435.933 2c88.95 0 166.56 49.47 206.77 122.34a234.216 234.216 0 0 1 26.57 78.16 237.519 237.519 0 0 1 2.66 35.5c0 130.13-105.87 236-236 236Z\\\"></path><path fill=\\\"#3f3d56\\\" d=\\\"M358.683 214a49.992 49.992 0 1 1 35.123-14.409A49.718 49.718 0 0 1 358.683 214Zm0-98a48.003 48.003 0 1 0 48 48 48.054 48.054 0 0 0-48-48Zm154 98a50 50 0 1 1 50-50 50.056 50.056 0 0 1-50 50Zm0-98a48 48 0 1 0 48 48 48.054 48.054 0 0 0-48-48Z\\\"></path><path fill=\\\"#3f3d56\\\" d=\\\"M393.103 198.88a49.012 49.012 0 0 1-68.84 0 38.013 38.013 0 0 1 68.84 0Zm154 0a49.012 49.012 0 0 1-68.84 0 38.013 38.013 0 0 1 68.84 0ZM403.683 246c0-5.523 17.909-10 40-10s40 4.477 40 10-17.909 26-40 26-40-20.477-40-26Z\\\"></path><circle cx=\\\"310.183\\\" cy=\\\"227.5\\\" r=\\\"17\\\" fill=\\\"#ff6584\\\"></circle><circle cx=\\\"561.683\\\" cy=\\\"228\\\" r=\\\"17\\\" fill=\\\"#ff6584\\\"></circle><path fill=\\\"#ffb8b8\\\" d=\\\"m197.859 463.363 12.26-.001 5.832-47.288-18.094.001.002 47.288z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"m233.763 476.745-38.53.002-.001-14.887h23.643a14.887 14.887 0 0 1 14.888 14.885Z\\\"></path><path fill=\\\"#ffb8b8\\\" d=\\\"m136.859 463.363 12.26-.001 5.832-47.288-18.094.001.002 47.288z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"m172.763 476.745-38.53.002-.001-14.887h23.643a14.887 14.887 0 0 1 14.888 14.885Zm28.447-206.114 10.777 85.386q2.222 17.608 3.11 35.346L218 449.43a4 4 0 0 1-3.995 4.2h-16.356a4 4 0 0 1-3.955-3.4l-14.71-96.913a2 2 0 0 0-3.944-.067l-17.721 94.917a4 4 0 0 1-3.626 3.184l-15.054.955a4 4 0 0 1-4.29-4.114l4.86-155.562Z\\\"></path><circle cx=\\\"153.462\\\" cy=\\\"124.45\\\" r=\\\"24.561\\\" fill=\\\"#ffb8b8\\\"></circle><path fill=\\\"#5392f0\\\" d=\\\"M134.21 294.631c6 14 32 24 38 4 4.64-15.46 23.02-21.96 31.13-24.11a4.016 4.016 0 0 0 2.86-4.86l-22.67-89.05a31.272 31.272 0 0 0-21.06-22.16c-18.02-5.58-37.02 5.91-40.07 24.52a137.157 137.157 0 0 0-1.59 15.76c-1.88 39.29 9.45 86.68 13.4 95.9Z\\\"></path><path fill=\\\"#ffb8b8\\\" d=\\\"M270.631 214.407a10.056 10.056 0 0 0-14.864 4.1l-35.577-3.354 8.722 16.393 32.448.672a10.11 10.11 0 0 0 9.271-17.811Z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"M252.939 232.639a4.505 4.505 0 0 1-3.352 1.493l-46.44-1.062a46.373 46.373 0 0 1-30.546-11.513l-27.846-24.421a14.497 14.497 0 1 1 13.956-25.413l46.118 36.391 44.903 8.654a4.515 4.515 0 0 1 3.41 3.886l.923 8.492a4.506 4.506 0 0 1-.52 2.634 4.455 4.455 0 0 1-.606.859ZM134.82 144.54a4.007 4.007 0 0 0 5.902-2.37l.014-.055c.446-1.864.076-3.81-.052-5.723s.059-4.013 1.361-5.42c2.428-2.62 6.748-1.231 10.259-1.894a8.664 8.664 0 0 0 6.74-9.253 13.53 13.53 0 0 0-.216-1.193 6.673 6.673 0 0 1 6.926-8.081c3.548.203 7.378 1.278 10.314-1.35a7.608 7.608 0 0 0 1.826-8.202c-1.676-4.838-6.413-7.37-11.101-8.763a40.62 40.62 0 0 0-34.43 5.65c-2.962 2.086-5.727 4.71-6.99 8.105s-.653 7.68 2.193 9.922a18.332 18.332 0 0 0-4.246 17.807c1.406 4.529 8.115 8.872 11.5 10.82Z\\\"></path><path fill=\\\"#a0616a\\\" d=\\\"M664.132 463.174h-12.259l-5.833-47.288 18.095.001-.003 47.287z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"M643.116 461.67h23.643v14.888h-38.53a14.887 14.887 0 0 1 14.887-14.887Z\\\"></path><path fill=\\\"#a0616a\\\" d=\\\"M751.132 463.174h-12.259l-5.833-47.288 18.095.001-.003 47.287z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"M730.116 461.67h23.643v14.888h-38.53a14.887 14.887 0 0 1 14.887-14.887Zm-65.776-27.784c-.134 0-.267-.005-.402-.016l-17.351-1.389a5 5 0 0 1-4.538-5.782l26.308-162.72 1.762-22.951a4.972 4.972 0 0 1 3.917-4.501l26.461-5.788a4.968 4.968 0 0 1 5.195 2.06l6.452 9.431a110.4 110.4 0 0 0 8.245 10.509c4.578 5.214 12.362 16.79 13.06 35.735a126.608 126.608 0 0 0 1.934 18.554l21.303 114.76a4.998 4.998 0 0 1-4.439 5.765L735.8 428.8a4.98 4.98 0 0 1-5.302-3.68L701.32 316.619a1 1 0 0 0-1.932.003l-30.22 113.55a5.005 5.005 0 0 1-4.829 3.714Z\\\"></path><circle cx=\\\"710.482\\\" cy=\\\"132.435\\\" r=\\\"24.561\\\" fill=\\\"#a0616a\\\"></circle><path fill=\\\"#5392f0\\\" d=\\\"m668.853 244.72-.509-35.074c-1.87-22.432 8.064-34.21 16.728-40.136a19.919 19.919 0 0 1 15.404-2.948l19.33 4.179a20.372 20.372 0 0 1 13.054 9.297 19.02 19.02 0 0 1 2.172 15.008 20.597 20.597 0 0 1-8.4 11.502c-16.608 11.724-17.778 31.419-17.788 31.617l-.02.407Z\\\"></path><path fill=\\\"#a0616a\\\" d=\\\"M615.206 224.212a11.036 11.036 0 0 1-16.496.478c-9.687-10.16 6.147-25.413 15.87-15.233a10.678 10.678 0 0 1 .953 1.12l49.028-1.218 5.852-10.703 17.985 6.983c-3.453 5.355-7.417 26.37-16.448 25.347-1.184.032-55.533-6.687-56.744-6.774Z\\\"></path><path fill=\\\"#5392f0\\\" d=\\\"m680.793 216.114-13.705-10.058a4.505 4.505 0 0 1-.965-6.29l17.453-23.783a13 13 0 1 1 20.961 15.383l-17.453 23.783a4.505 4.505 0 0 1-6.29.965Z\\\"></path><path fill=\\\"#2f2e41\\\" d=\\\"M704.512 126.296a40.094 40.094 0 0 1-10.717 1.846c-3.637-.042-7.416-1.197-9.872-3.88-3.488-3.81-3.442-10.016-.742-14.42s7.545-7.148 12.556-8.404 10.244-1.197 15.41-1.127c6.133-4.472 15.076-3.792 21.37.452s10.14 11.436 11.773 18.849 1.276 15.109.657 22.674c-.34 4.146.008 9.529 3.969 10.8 2.5.802 5.2-.67 6.992-2.589s3.042-4.303 4.914-6.143c3.99-3.92 10.392-4.716 15.663-2.842s9.476 6.045 12.44 10.789a37.538 37.538 0 0 1-42.627 55.845c-13.524-4.06-23.735-15.475-30.305-27.974a92.386 92.386 0 0 1-10.019-52.422Z\\\"></path><path fill=\\\"#3f3d56\\\" d=\\\"M870 477H1a1 1 0 0 1 0-2h869a1 1 0 0 1 0 2Z\\\"></path>\", 34)\nconst _hoisted_36 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_36))\n}\nexport default { render: render }","import { ref, onMounted } from \"vue\";\n\n/**\n * 绘制图形验证码\n * @param width - 图形宽度\n * @param height - 图形高度\n */\nexport const useImageVerify = (width = 120, height = 40) => {\n  const domRef = ref<HTMLCanvasElement>();\n  const imgCode = ref(\"\");\n\n  function setImgCode(code: string) {\n    imgCode.value = code;\n  }\n\n  function getImgCode() {\n    if (!domRef.value) return;\n    imgCode.value = draw(domRef.value, width, height);\n  }\n\n  onMounted(() => {\n    getImgCode();\n  });\n\n  return {\n    domRef,\n    imgCode,\n    setImgCode,\n    getImgCode\n  };\n};\n\nfunction randomNum(min: number, max: number) {\n  const num = Math.floor(Math.random() * (max - min) + min);\n  return num;\n}\n\nfunction randomColor(min: number, max: number) {\n  const r = randomNum(min, max);\n  const g = randomNum(min, max);\n  const b = randomNum(min, max);\n  return `rgb(${r},${g},${b})`;\n}\n\nfunction draw(dom: HTMLCanvasElement, width: number, height: number) {\n  let imgCode = \"\";\n\n  const NUMBER_STRING = \"0123456789\";\n\n  const ctx = dom.getContext(\"2d\");\n  if (!ctx) return imgCode;\n\n  ctx.fillStyle = randomColor(180, 230);\n  ctx.fillRect(0, 0, width, height);\n  for (let i = 0; i < 4; i += 1) {\n    const text = NUMBER_STRING[randomNum(0, NUMBER_STRING.length)];\n    imgCode += text;\n    const fontSize = randomNum(18, 41);\n    const deg = randomNum(-30, 30);\n    ctx.font = `${fontSize}px Simhei`;\n    ctx.textBaseline = \"top\";\n    ctx.fillStyle = randomColor(80, 150);\n    ctx.save();\n    ctx.translate(30 * i + 15, 15);\n    ctx.rotate((deg * Math.PI) / 180);\n    ctx.fillText(text, -15 + 5, -15);\n    ctx.restore();\n  }\n  for (let i = 0; i < 5; i += 1) {\n    ctx.beginPath();\n    ctx.moveTo(randomNum(0, width), randomNum(0, height));\n    ctx.lineTo(randomNum(0, width), randomNum(0, height));\n    ctx.strokeStyle = randomColor(180, 230);\n    ctx.closePath();\n    ctx.stroke();\n  }\n  for (let i = 0; i < 41; i += 1) {\n    ctx.beginPath();\n    ctx.arc(randomNum(0, width), randomNum(0, height), 1, 0, 2 * Math.PI);\n    ctx.closePath();\n    ctx.fillStyle = randomColor(150, 200);\n    ctx.fill();\n  }\n  return imgCode;\n}\n","<script setup lang=\"ts\">\nimport { watch } from \"vue\";\nimport { useImageVerify } from \"./hooks\";\n\ndefineOptions({\n  name: \"ReImageVerify\"\n});\n\ninterface Props {\n  code?: string;\n}\n\ninterface Emits {\n  (e: \"update:code\", code: string): void;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  code: \"\"\n});\n\nconst emit = defineEmits<Emits>();\n\nconst { domRef, imgCode, setImgCode, getImgCode } = useImageVerify();\n\nwatch(\n  () => props.code,\n  newValue => {\n    setImgCode(newValue);\n  }\n);\nwatch(imgCode, newValue => {\n  emit(\"update:code\", newValue);\n});\n\ndefineExpose({ getImgCode });\n</script>\n\n<template>\n  <canvas\n    ref=\"domRef\"\n    width=\"120\"\n    height=\"40\"\n    class=\"cursor-pointer\"\n    @click=\"getImgCode\"\n  />\n</template>\n","import reImageVerify from \"./src/index.vue\";\nimport { withInstall } from \"@pureadmin/utils\";\n\n/** 图形验证码组件 */\nexport const ReImageVerify = withInstall(reImageVerify);\n\nexport default ReImageVerify;\n","<script setup lang=\"ts\">\nimport {\n  ref,\n  toRaw,\n  reactive,\n  watch,\n  computed,\n  onMounted,\n  onBeforeUnmount\n} from \"vue\";\nimport { useI18n } from \"vue-i18n\";\nimport Motion from \"./utils/motion\";\nimport { useRouter } from \"vue-router\";\nimport { message } from \"@/utils/message\";\nimport { loginRules } from \"./utils/rule\";\nimport phone from \"./components/phone.vue\";\nimport TypeIt from \"@/components/ReTypeit\";\nimport qrCode from \"./components/qrCode.vue\";\nimport regist from \"./components/regist.vue\";\nimport update from \"./components/update.vue\";\nimport { useNav } from \"@/layout/hooks/useNav\";\nimport type { FormInstance } from \"element-plus\";\nimport { $t, transformI18n } from \"@/plugins/i18n\";\nimport { operates, thirdParty } from \"./utils/enums\";\nimport { useLayout } from \"@/layout/hooks/useLayout\";\nimport { useUserStoreHook } from \"@/store/modules/user\";\nimport { initRouter, getTopMenu } from \"@/router/utils\";\nimport { bg, avatar, illustration } from \"./utils/static\";\nimport { ReImageVerify } from \"@/components/ReImageVerify\";\nimport { useRenderIcon } from \"@/components/ReIcon/src/hooks\";\nimport { useTranslationLang } from \"@/layout/hooks/useTranslationLang\";\nimport { useDataThemeChange } from \"@/layout/hooks/useDataThemeChange\";\n\nimport dayIcon from \"@/assets/svg/day.svg?component\";\nimport darkIcon from \"@/assets/svg/dark.svg?component\";\nimport globalization from \"@/assets/svg/globalization.svg?component\";\nimport Lock from \"@iconify-icons/ri/lock-fill\";\nimport Check from \"@iconify-icons/ep/check\";\nimport User from \"@iconify-icons/ri/user-3-fill\";\n\ndefineOptions({\n  name: \"Login\"\n});\n\nconst imgCode = ref(\"\");\nconst router = useRouter();\nconst loading = ref(false);\nconst checked = ref(false);\nconst ruleFormRef = ref<FormInstance>();\nconst currentPage = computed(() => {\n  return useUserStoreHook().currentPage;\n});\n\nconst { t } = useI18n();\nconst { initStorage } = useLayout();\ninitStorage();\nconst { dataTheme, dataThemeChange } = useDataThemeChange();\ndataThemeChange();\nconst { title, getDropdownItemStyle, getDropdownItemClass } = useNav();\nconst { locale, translationCh, translationEn } = useTranslationLang();\n\nconst ruleForm = reactive({\n  username: \"admin\",\n  password: \"admin123\",\n  verifyCode: \"\"\n});\n\nconst onLogin = async (formEl: FormInstance | undefined) => {\n  loading.value = true;\n  if (!formEl) return;\n  await formEl.validate((valid, fields) => {\n    if (valid) {\n      useUserStoreHook()\n        .loginByUsername({ username: ruleForm.username, password: \"admin123\" })\n        .then(res => {\n          if (res.success) {\n            // 获取后端路由\n            initRouter().then(() => {\n              router.push(getTopMenu(true).path);\n              message(\"登录成功\", { type: \"success\" });\n            });\n          }\n        });\n    } else {\n      loading.value = false;\n      return fields;\n    }\n  });\n};\n\n/** 使用公共函数，避免`removeEventListener`失效 */\nfunction onkeypress({ code }: KeyboardEvent) {\n  if (code === \"Enter\") {\n    onLogin(ruleFormRef.value);\n  }\n}\n\nonMounted(() => {\n  window.document.addEventListener(\"keypress\", onkeypress);\n});\n\nonBeforeUnmount(() => {\n  window.document.removeEventListener(\"keypress\", onkeypress);\n});\n\nwatch(imgCode, value => {\n  useUserStoreHook().SET_VERIFYCODE(value);\n});\n</script>\n\n<template>\n  <div class=\"select-none\">\n    <img :src=\"bg\" class=\"wave\" />\n    <div class=\"flex-c absolute right-5 top-3\">\n      <!-- 主题 -->\n      <el-switch\n        v-model=\"dataTheme\"\n        inline-prompt\n        :active-icon=\"dayIcon\"\n        :inactive-icon=\"darkIcon\"\n        @change=\"dataThemeChange\"\n      />\n      <!-- 国际化 -->\n      <el-dropdown trigger=\"click\">\n        <globalization\n          class=\"hover:text-primary hover:!bg-[transparent] w-[20px] h-[20px] ml-1.5 cursor-pointer outline-none duration-300\"\n        />\n        <template #dropdown>\n          <el-dropdown-menu class=\"translation\">\n            <el-dropdown-item\n              :style=\"getDropdownItemStyle(locale, 'zh')\"\n              :class=\"['dark:!text-white', getDropdownItemClass(locale, 'zh')]\"\n              @click=\"translationCh\"\n            >\n              <IconifyIconOffline\n                class=\"check-zh\"\n                v-show=\"locale === 'zh'\"\n                :icon=\"Check\"\n              />\n              简体中文\n            </el-dropdown-item>\n            <el-dropdown-item\n              :style=\"getDropdownItemStyle(locale, 'en')\"\n              :class=\"['dark:!text-white', getDropdownItemClass(locale, 'en')]\"\n              @click=\"translationEn\"\n            >\n              <span class=\"check-en\" v-show=\"locale === 'en'\">\n                <IconifyIconOffline :icon=\"Check\" />\n              </span>\n              English\n            </el-dropdown-item>\n          </el-dropdown-menu>\n        </template>\n      </el-dropdown>\n    </div>\n    <div class=\"login-container\">\n      <div class=\"img\">\n        <component :is=\"toRaw(illustration)\" />\n      </div>\n      <div class=\"login-box\">\n        <div class=\"login-form\">\n          <avatar class=\"avatar\" />\n          <Motion>\n            <h2 class=\"outline-none\">\n              <TypeIt :values=\"[title]\" :cursor=\"false\" :speed=\"150\" />\n            </h2>\n          </Motion>\n\n          <el-form\n            v-if=\"currentPage === 0\"\n            ref=\"ruleFormRef\"\n            :model=\"ruleForm\"\n            :rules=\"loginRules\"\n            size=\"large\"\n          >\n            <Motion :delay=\"100\">\n              <el-form-item\n                :rules=\"[\n                  {\n                    required: true,\n                    message: transformI18n($t('login.usernameReg')),\n                    trigger: 'blur'\n                  }\n                ]\"\n                prop=\"username\"\n              >\n                <el-input\n                  clearable\n                  v-model=\"ruleForm.username\"\n                  :placeholder=\"t('login.username')\"\n                  :prefix-icon=\"useRenderIcon(User)\"\n                />\n              </el-form-item>\n            </Motion>\n\n            <Motion :delay=\"150\">\n              <el-form-item prop=\"password\">\n                <el-input\n                  clearable\n                  show-password\n                  v-model=\"ruleForm.password\"\n                  :placeholder=\"t('login.password')\"\n                  :prefix-icon=\"useRenderIcon(Lock)\"\n                />\n              </el-form-item>\n            </Motion>\n\n            <Motion :delay=\"200\">\n              <el-form-item prop=\"verifyCode\">\n                <el-input\n                  clearable\n                  v-model=\"ruleForm.verifyCode\"\n                  :placeholder=\"t('login.verifyCode')\"\n                  :prefix-icon=\"useRenderIcon('ri:shield-keyhole-line')\"\n                >\n                  <template v-slot:append>\n                    <ReImageVerify v-model:code=\"imgCode\" />\n                  </template>\n                </el-input>\n              </el-form-item>\n            </Motion>\n\n            <Motion :delay=\"250\">\n              <el-form-item>\n                <div class=\"w-full h-[20px] flex justify-between items-center\">\n                  <el-checkbox v-model=\"checked\">\n                    {{ t(\"login.remember\") }}\n                  </el-checkbox>\n                  <el-button\n                    link\n                    type=\"primary\"\n                    @click=\"useUserStoreHook().SET_CURRENTPAGE(4)\"\n                  >\n                    {{ t(\"login.forget\") }}\n                  </el-button>\n                </div>\n                <el-button\n                  class=\"w-full mt-4\"\n                  size=\"default\"\n                  type=\"primary\"\n                  :loading=\"loading\"\n                  @click=\"onLogin(ruleFormRef)\"\n                >\n                  {{ t(\"login.login\") }}\n                </el-button>\n              </el-form-item>\n            </Motion>\n\n            <Motion :delay=\"300\">\n              <el-form-item>\n                <div class=\"w-full h-[20px] flex justify-between items-center\">\n                  <el-button\n                    v-for=\"(item, index) in operates\"\n                    :key=\"index\"\n                    class=\"w-full mt-4\"\n                    size=\"default\"\n                    @click=\"useUserStoreHook().SET_CURRENTPAGE(index + 1)\"\n                  >\n                    {{ t(item.title) }}\n                  </el-button>\n                </div>\n              </el-form-item>\n            </Motion>\n          </el-form>\n\n          <Motion v-if=\"currentPage === 0\" :delay=\"350\">\n            <el-form-item>\n              <el-divider>\n                <p class=\"text-gray-500 text-xs\">{{ t(\"login.thirdLogin\") }}</p>\n              </el-divider>\n              <div class=\"w-full flex justify-evenly\">\n                <span\n                  v-for=\"(item, index) in thirdParty\"\n                  :key=\"index\"\n                  :title=\"t(item.title)\"\n                >\n                  <IconifyIconOnline\n                    :icon=\"`ri:${item.icon}-fill`\"\n                    width=\"20\"\n                    class=\"cursor-pointer text-gray-500 hover:text-blue-400\"\n                  />\n                </span>\n              </div>\n            </el-form-item>\n          </Motion>\n          <!-- 手机号登录 -->\n          <phone v-if=\"currentPage === 1\" />\n          <!-- 二维码登录 -->\n          <qrCode v-if=\"currentPage === 2\" />\n          <!-- 注册 -->\n          <regist v-if=\"currentPage === 3\" />\n          <!-- 忘记密码 -->\n          <update v-if=\"currentPage === 4\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@import url(\"@/style/login.css\");\n</style>\n\n<style lang=\"scss\" scoped>\n:deep(.el-input-group__append, .el-input-group__prepend) {\n  padding: 0;\n}\n\n.translation {\n  ::v-deep(.el-dropdown-menu__item) {\n    padding: 5px 40px;\n  }\n\n  .check-zh {\n    position: absolute;\n    left: 20px;\n  }\n\n  .check-en {\n    position: absolute;\n    left: 20px;\n  }\n}\n</style>\n"],"names":["operates","$t","thirdParty","bg","_hoisted_1","_hoisted_2","_createElementVNode","_hoisted_3","_hoisted_4","_hoisted_5","render","_ctx","_cache","_openBlock","_createElementBlock","avatar","_createStaticVNode","_hoisted_36","illustration","useImageVerify","width","height","domRef","ref","imgCode","setImgCode","code","getImgCode","draw","onMounted","randomNum","min","max","randomColor","r","g","b","dom","NUMBER_STRING","ctx","i","text","fontSize","deg","watch","props","newValue","emit","__expose","ReImageVerify","withInstall","reImageVerify","router","useRouter","loading","checked","ruleFormRef","currentPage","computed","useUserStoreHook","t","useI18n","initStorage","useLayout","dataTheme","dataThemeChange","useDataThemeChange","title","getDropdownItemStyle","getDropdownItemClass","useNav","locale","translationCh","translationEn","useTranslationLang","ruleForm","reactive","onLogin","formEl","valid","fields","res","initRouter","getTopMenu","message","onkeypress","onBeforeUnmount","value"],"mappings":"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"}