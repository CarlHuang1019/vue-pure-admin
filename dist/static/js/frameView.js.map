{"version":3,"file":"frameView.js","sources":["../../../src/layout/frameView.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { useI18n } from \"vue-i18n\";\nimport { useRoute } from \"vue-router\";\nimport { ref, unref, onMounted, nextTick } from \"vue\";\n\ndefineOptions({\n  name: \"FrameView\"\n});\n\nconst { t } = useI18n();\nconst loading = ref(true);\nconst currentRoute = useRoute();\nconst frameSrc = ref<string>(\"\");\nconst frameRef = ref<HTMLElement | null>(null);\n\nif (unref(currentRoute.meta)?.frameSrc) {\n  frameSrc.value = unref(currentRoute.meta)?.frameSrc as string;\n}\nunref(currentRoute.meta)?.frameLoading === false && hideLoading();\n\nfunction hideLoading() {\n  loading.value = false;\n}\n\nfunction init() {\n  nextTick(() => {\n    const iframe = unref(frameRef);\n    if (!iframe) return;\n    const _frame = iframe as any;\n    if (_frame.attachEvent) {\n      _frame.attachEvent(\"onload\", () => {\n        hideLoading();\n      });\n    } else {\n      iframe.onload = () => {\n        hideLoading();\n      };\n    }\n  });\n}\n\nonMounted(() => {\n  init();\n});\n</script>\n\n<template>\n  <div\n    class=\"frame\"\n    v-loading=\"loading\"\n    :element-loading-text=\"t('status.hsLoad')\"\n  >\n    <iframe :src=\"frameSrc\" class=\"frame-iframe\" ref=\"frameRef\" />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.frame {\n  z-index: 998;\n  height: calc(100vh - 88px);\n\n  .frame-iframe {\n    box-sizing: border-box;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    border: 0;\n  }\n}\n\n.main-content {\n  margin: 2px 0 0 !important;\n}\n</style>\n"],"names":["t","useI18n","loading","ref","currentRoute","useRoute","frameSrc","frameRef","_a","unref","_b","_c","hideLoading","init","nextTick","iframe","_frame","onMounted"],"mappings":"4NASM,KAAA,CAAE,EAAAA,GAAMC,IACRC,EAAUC,EAAI,EAAI,EAClBC,EAAeC,IACfC,EAAWH,EAAY,EAAE,EACzBI,EAAWJ,EAAwB,IAAI,GAEzCK,EAAAC,EAAML,EAAa,IAAI,IAAvB,MAAAI,EAA0B,WAC5BF,EAAS,OAAQI,EAAAD,EAAML,EAAa,IAAI,IAAvB,YAAAM,EAA0B,YAE7CC,EAAAF,EAAML,EAAa,IAAI,IAAvB,YAAAO,EAA0B,gBAAiB,IAASC,IAEpD,SAASA,GAAc,CACrBV,EAAQ,MAAQ,EAClB,CAEA,SAASW,GAAO,CACdC,EAAS,IAAM,CACP,MAAAC,EAASN,EAAMF,CAAQ,EAC7B,GAAI,CAACQ,EAAQ,OACb,MAAMC,EAASD,EACXC,EAAO,YACFA,EAAA,YAAY,SAAU,IAAM,CACrBJ,GAAA,CACb,EAEDG,EAAO,OAAS,IAAM,CACRH,GAAA,CAEhB,CACD,CACH,CAEA,OAAAK,EAAU,IAAM,CACTJ,GAAA,CACN"}