{"version":3,"file":"multi.vue_vue_type_script_setup_true_lang.js","sources":["../../../src/views/editor/components/multi.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport ReCol from \"@/components/ReCol\";\nimport { onBeforeUnmount, ref, shallowRef } from \"vue\";\nimport \"@wangeditor/editor/dist/css/style.css\";\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\n\ndefineOptions({\n  name: \"MultiEditor\"\n});\n\n// 模拟后端返回多个编辑器的数据\nconst endEditorList = [\n  {\n    value: \"<p>测试一</p>\"\n  },\n  {\n    value: \"<p>测试二</p>\"\n  },\n  {\n    value: \"<p>测试三</p>\"\n  },\n  {\n    value: \"<p>测试四</p>\"\n  }\n];\n\n// 多个编辑器的情况下，前端必须进行处理，满足 Toolbar 组件的 editor 属性 所需的 shallowRef 格式\nconst editorList = ref([]);\nendEditorList.forEach(edit => {\n  editorList.value.push({\n    value: edit.value,\n    // 编辑器实例，必须用 shallowRef\n    editorRef: shallowRef()\n  });\n});\n\nconst mode = \"default\";\n\nconst toolbarConfig: any = { excludeKeys: \"fullScreen\" };\nconst editorConfig = { placeholder: \"请输入内容...\" };\n\nconst handleCreated = (editor, index) => {\n  // 记录 editor 实例，重要！\n  editorList.value[index].editorRef = editor;\n};\n\n// 组件销毁时，也及时销毁编辑器\nonBeforeUnmount(() => {\n  return editorList.value.map(edit => {\n    if (edit.editorRef == null) return;\n    edit.editorRef.destroy();\n  });\n});\n</script>\n\n<template>\n  <el-row :gutter=\"30\" justify=\"space-around\">\n    <re-col :value=\"11\" v-for=\"(edit, index) in editorList\" :key=\"index\">\n      <div class=\"wangeditor\">\n        <Toolbar\n          :editor=\"edit.editorRef\"\n          :defaultConfig=\"toolbarConfig\"\n          :mode=\"mode\"\n          style=\"border-bottom: 1px solid #ccc\"\n        />\n        <Editor\n          v-model=\"edit.value\"\n          :defaultConfig=\"editorConfig\"\n          :mode=\"mode\"\n          style=\"height: 300px; overflow-y: hidden\"\n          @onCreated=\"editor => handleCreated(editor, index)\"\n        />\n      </div>\n    </re-col>\n  </el-row>\n</template>\n"],"names":["mode","endEditorList","editorList","ref","edit","shallowRef","toolbarConfig","editorConfig","handleCreated","editor","index","onBeforeUnmount"],"mappings":"oOAoCMA,EAAO,0DAzBb,MAAMC,EAAgB,CACpB,CACE,MAAO,YACT,EACA,CACE,MAAO,YACT,EACA,CACE,MAAO,YACT,EACA,CACE,MAAO,YACT,CAAA,EAIIC,EAAaC,EAAI,CAAA,CAAE,EACzBF,EAAc,QAAgBG,GAAA,CAC5BF,EAAW,MAAM,KAAK,CACpB,MAAOE,EAAK,MAEZ,UAAWC,EAAW,CAAA,CACvB,CAAA,CACF,EAIK,MAAAC,EAAqB,CAAE,YAAa,cACpCC,EAAe,CAAE,YAAa,YAE9BC,EAAgB,CAACC,EAAQC,IAAU,CAE5BR,EAAA,MAAMQ,CAAK,EAAE,UAAYD,CAAA,EAItC,OAAAE,EAAgB,IACPT,EAAW,MAAM,IAAYE,GAAA,CAC9BA,EAAK,WAAa,MACtBA,EAAK,UAAU,SAAQ,CACxB,CACF"}