{"version":3,"file":"index22.js","sources":["../../../src/views/components/danmaku/danmu.ts","../../../node_modules/.pnpm/vue3-danmaku@1.5.1_vue@3.3.4/node_modules/vue3-danmaku/dist/vue3-danmaku.esm.js","../../../src/views/components/danmaku/index.vue"],"sourcesContent":["const customDanmus = [\n  {\n    avatar:\n      \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIADIAMgMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAFBAYBAgMAB//aAAgBAQAAAAD7HU4ObhMC3AnlYvY8ISwA+6WDOd4/RA96FVeF66BOVWB3TsAOgZC27wv/xAAYAQEBAQEBAAAAAAAAAAAAAAACAwQAAf/aAAgBAhAAAAC3sw8uyRDQPV//xAAYAQADAQEAAAAAAAAAAAAAAAAAAgMBBP/aAAgBAxAAAACQ7LfmoUTNvFf/xAA0EAACAQMBBAcHAwUAAAAAAAABAgMABBESBRMxQRAhIjJRYbEUIzRCUnOBM3KSU2KRoeH/2gAIAQEAAT8AmmSCJpHOAoq6vZp8lmITkgonSQCMZxikkdGDxsVbxFbK2l7TGUkwHQfy6Ln4if7jetbcdglvH9TFv40hD71CGzlQpAyACRkt4VcxojxOdIj06GzwA5VKkilGUdjUcNxD9XlwI5g1Bfm0u4nC5UHDeYNWu0LS4B3D6mHHIwaufiJ/uN61tm6Et6GPCIbv8mtqi4gtrFkzjeuxIGRq+TP4orI1jpK+8MHAfVprYcM8kVysmoIGiwG8UfVgVcwh1ecDGiYcvlNWk7W9zDKucqwyPEVOczzfvb1q/wBkXWqR4Sja8nDHGCajAEagHIAx/jourmK0haaV9KrWyrFZLRZJ07MqNhc8Q3M/irfZFlaOGQF2HzOc1cACeYD+o3r0XptYEJKAyMx06TgsxOaupr+MhkIQk6TlfPlkVNCIxBc3A9onLjRG/WtWV1BPFlRp09TpzBHLoufiJ/uN69G05JLxt8C2ksQpTiAMHIq0mQz6HnMnZwurBwBRhKTLLK5Y6Oz/AGf9qwla3u4TykBRh/sdFx8RN9xvWpri43Unv5O6fmNSSSCHGtsb0DGfKrFm3zdZ7o9RUskhMnbbu+NLJJrh7bfqJz869onxjfSY/callk3knvG7x51//8QAIxEAAgEEAQMFAAAAAAAAAAAAAQIRAAMSMRAEIXETMjNBUf/aAAgBAgEBPwBMUTNv3tSdQrgZDYpwMmx0N8PdFv0iBMAyKS4QroF99JcxDhhMntwxgUCoJIER90jZCeG2PBpvjNWtHzx//8QAIBEAAgICAgIDAAAAAAAAAAAAAQIAERASAyEyM0GBkf/aAAgBAwEBPwBtmbURuErdRb1W/nCIW3vqMgJVr8YyWVIyvYG/5CKwJze36jY//9k=\",\n    name: \"美绪\",\n    text: \"马什么梅？\"\n  },\n  {\n    avatar:\n      \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIADIAMgMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAABQIDBAEGB//aAAgBAQAAAAD65hzG3WLcATfCbHYQ9IY0uiEfRkU1IOr+RoUG1ornWj7Y6//EABgBAQADAQAAAAAAAAAAAAAAAAQAAgUD/9oACAECEAAAACEf3IJba51tGDNq/wD/xAAYAQEAAwEAAAAAAAAAAAAAAAAEAQMFAv/aAAgBAxAAAABSg0MWQdj+c6VozP/EAC0QAAIBAwMBBgUFAAAAAAAAAAECEQADBBASMUEiUVJhcZEFExQhgSAyQoKx/9oACAEBAAE/AKu5oEi2A3meKOXf8cfgV9Xe2kEgyOeCKsZSXAqs0XP91z7+wC3MSCzeg/RbuG06uO8T6a5kNkOOu0CpUXWQMdo4kQRPQihPd9tH+4jXIw0yDukq0RNHFu2/iOVku0pfx7foHt91MttbMyN7njqQDo3BPkdWEqRJEjkV8QOV2LVq2xBBlkoq+y181CrgHn1nXHffZQ+UH8aEwCaEoJP9qzbe+ySOUO7XCuxca2f5CR6jS477H7bftPWt7+NvekdzbWXYyo60rvtXtHgda3v4j71Yd/qLPaPJ6+Vb38be9f/EACYRAAECBAQHAQAAAAAAAAAAAAECAwAEEBIREzFSITNBQlFhgXL/2gAIAQIBAT8AffKDYjXqYznd5hhwuI46ijjOOaSfaYUm232Ik9F/KKQFRMN2LHgiJVdrmG6s32fYa5iP0Kf/xAAmEQABAgQFBAMAAAAAAAAAAAABAgMAEBESBBNCUoEhMTNhUXFy/9oACAEDAQE/AGGAoXK4EZLWwQ+2G19Oxk28RlhI9GEqur9xi9HMm3C2qtAfRhhy9J+axiUXIrtnhdfEOeNf5Mv/2Q==\",\n    name: \"博士\",\n    text: \"马东什么？\"\n  },\n  {\n    avatar:\n      \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIADIAMgMBIgACEQEDEQH/xAAxAAACAgMBAAAAAAAAAAAAAAAABgQFAQIHAwEBAAMBAAAAAAAAAAAAAAAAAwABAgT/2gAMAwEAAhADEAAAAI7CsPnN1VeZ0okpTbSWASKzwmMPRy3PuuWhpv4KvQ7pcJYTUb+hdLQYWJoaVU+RU3jcXiaoegAhWOAPeeaBd1wGtf/EAC4QAAIBAwIEBAUFAQAAAAAAAAECAwAEEQUhBhASMRMiQWEUI3KBoSAzQlFSkv/aAAgBAQABPwDTxidHHbdTyZGjdkcYYelBGKM4HlUgH7/osXInRfQsK0q18abxGHkj/JrV0KXrEfzUGtLiE0F1G48r4GfcVJDJFI0TbMp52W91D9VXt42mWQCu0QUqHZQC7SyDIRA22QO5NXkFyLeFpnWRggYsMZw/+ioAPsRVlOtrpsshx+6d2OFGw3J/oVK897YR6nbfORCTkp0OVQ7lRk5Aq5gMZSVR8qVepfbPpy0jDSRyEZxIg/6JrjKJytlEEJ63uJD7ttXB6Tn41bhW8Mwxxjqzt3OBWrx+Bw9fQsRvIgBzjYutcP3F8upWVmZZltvjFPQW22BqeAJpHh+kWyeyhsL+KXS9RcB1WLpYZGSc4NcKwxTrcRy+qrj2IJIqe3S5AEsSOAcgMobB+9Lb9KhVAAHYCntRIjI6hkYYZWGQRUGm2ltMssVsiSKCAVGMZqWFZ4fDY4XYn7ULaEgF182N/Me9cIuI3kY9gFodLAEHINFgKDKdqwK1LVotOMSsnWz5JAPYUeJZyTiKMVwv2n+la08npcZOBjke3LVWZtRuizE4kI5f/8QAIBEBAAIBAgcAAAAAAAAAAAAAAQARAwIQEiAhMTJBcf/aAAgBAgEBPwDL5HzkadfX0RDjmTSUJtks1MqWpVypk7uxt//EACARAQABAwMFAAAAAAAAAAAAAAEAAhEhAxATEiIxYXH/2gAIAQMBAT8A0m1L9l+2++Sg9sF45p1N7M6iUJYwM5GYW4ZmZT4Njb//2Q==\",\n    name: \"柚子\",\n    text: \"什么冬梅？\"\n  }\n];\n\nconst danmus = [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n\nconst getDanmuData = () => {\n  return danmus.map((text, index) => {\n    const _index = index % 3;\n    return {\n      avatar: customDanmus[_index].avatar,\n      name: customDanmus[_index].name,\n      text\n    };\n  });\n};\n\nexport { customDanmus, danmus, getDanmuData };\n","import { computed, defineComponent, ref, reactive, onMounted, onBeforeUnmount, nextTick, createApp, h, openBlock, createElementBlock, createElementVNode, normalizeClass, renderSlot } from 'vue';\n\nfunction useModelWrapper(props, emit, name = 'modelValue', translater) {\r\n    return computed({\r\n        get: () => props[name],\r\n        set: (value) => {\r\n            emit(`update:${name}`, translater ? translater(value) : value);\r\n        },\r\n    });\r\n}\n\nvar script = defineComponent({\r\n    name: 'vue3-danmaku',\r\n    components: {},\r\n    props: {\r\n        /**\r\n         * 弹幕列表数据\r\n         */\r\n        danmus: {\r\n            type: Array,\r\n            required: true,\r\n            default: () => [],\r\n        },\r\n        /**\r\n         * 轨道数量，0为最大轨道数量（撑满容器）\r\n         */\r\n        channels: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n        /**\r\n         * 是否自动播放\r\n         */\r\n        autoplay: {\r\n            type: Boolean,\r\n            default: true,\r\n        },\r\n        /**\r\n         * 是否循环播放\r\n         */\r\n        loop: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        /**\r\n         * 是否开启弹幕插槽，默认否\r\n         */\r\n        useSlot: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        /**\r\n         * 弹幕刷新频率(ms)\r\n         */\r\n        debounce: {\r\n            type: Number,\r\n            default: 100,\r\n        },\r\n        /**\r\n         * 弹幕速度（像素/秒）\r\n         */\r\n        speeds: {\r\n            type: Number,\r\n            default: 200,\r\n        },\r\n        /**\r\n         * 是否开启随机轨道注入弹幕\r\n         */\r\n        randomChannel: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        /**\r\n         * 弹幕字号（仅文本模式）\r\n         */\r\n        fontSize: {\r\n            type: Number,\r\n            default: 18,\r\n        },\r\n        /**\r\n         * 弹幕垂直间距\r\n         */\r\n        top: {\r\n            type: Number,\r\n            default: 4,\r\n        },\r\n        /**\r\n         * 弹幕水平间距\r\n         */\r\n        right: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n        /**\r\n         * 是否开启悬浮暂停\r\n         */\r\n        isSuspend: {\r\n            type: Boolean,\r\n            default: false,\r\n        },\r\n        /**\r\n         * 弹幕额外样式\r\n         */\r\n        extraStyle: {\r\n            type: String,\r\n            default: '',\r\n        },\r\n    },\r\n    emits: ['list-end', 'play-end', 'update:danmus'],\r\n    setup(props, { emit, slots }) {\r\n        // 容器\r\n        let container = ref(document.createElement('div'));\r\n        let dmContainer = ref(document.createElement('div'));\r\n        const containerWidth = ref(0);\r\n        const containerHeight = ref(0);\r\n        // 变量\r\n        let timer = 0;\r\n        const calcChannels = ref(0);\r\n        const danmuHeight = ref(0);\r\n        const index = ref(0);\r\n        const hidden = ref(false);\r\n        const paused = ref(false);\r\n        const danChannel = ref({});\r\n        const danmuList = useModelWrapper(props, emit, 'danmus');\r\n        const danmaku = reactive({\r\n            channels: computed(() => props.channels || calcChannels.value),\r\n            autoplay: computed(() => props.autoplay),\r\n            loop: computed(() => props.loop),\r\n            useSlot: computed(() => props.useSlot),\r\n            debounce: computed(() => props.debounce),\r\n            randomChannel: computed(() => props.randomChannel),\r\n        });\r\n        const danmu = reactive({\r\n            height: computed(() => danmuHeight.value),\r\n            fontSize: computed(() => props.fontSize),\r\n            speeds: computed(() => props.speeds),\r\n            top: computed(() => props.top),\r\n            right: computed(() => props.right),\r\n        });\r\n        onMounted(() => {\r\n            init();\r\n        });\r\n        onBeforeUnmount(() => {\r\n            clear();\r\n        });\r\n        function init() {\r\n            initCore();\r\n            props.isSuspend && initSuspendEvents();\r\n            if (danmaku.autoplay) {\r\n                play();\r\n            }\r\n        }\r\n        function initCore() {\r\n            containerWidth.value = container.value.offsetWidth;\r\n            containerHeight.value = container.value.offsetHeight;\r\n        }\r\n        function play() {\r\n            paused.value = false;\r\n            if (!timer) {\r\n                timer = setInterval(() => draw(), danmaku.debounce);\r\n            }\r\n        }\r\n        /**\r\n         * 绘制弹幕\r\n         */\r\n        function draw() {\r\n            if (!paused.value && danmuList.value.length) {\r\n                if (index.value > danmuList.value.length - 1) {\r\n                    const screenDanmus = dmContainer.value.children.length;\r\n                    if (danmaku.loop) {\r\n                        if (screenDanmus < index.value) {\r\n                            // 一轮弹幕插入完毕\r\n                            emit('list-end');\r\n                            index.value = 0;\r\n                        }\r\n                        insert();\r\n                    }\r\n                }\r\n                else {\r\n                    insert();\r\n                }\r\n            }\r\n        }\r\n        /**\r\n         * 插入弹幕（也暴露到外部，允许外部直接执行绘制弹幕方法）\r\n         * @param {Object} dm 外部定义的弹幕\r\n         */\r\n        function insert(dm) {\r\n            const _index = danmaku.loop ? index.value % danmuList.value.length : index.value;\r\n            const _danmu = dm || danmuList.value[_index];\r\n            let el = document.createElement(`div`);\r\n            if (danmaku.useSlot) {\r\n                el = getSlotComponent(_danmu, _index).$el;\r\n            }\r\n            else {\r\n                el.innerHTML = _danmu;\r\n                el.setAttribute('style', props.extraStyle);\r\n                el.style.fontSize = `${danmu.fontSize}px`;\r\n                el.style.lineHeight = `${danmu.fontSize}px`;\r\n            }\r\n            el.classList.add('dm');\r\n            dmContainer.value.appendChild(el);\r\n            el.style.opacity = '0';\r\n            nextTick(() => {\r\n                if (!danmu.height) {\r\n                    danmuHeight.value = el.offsetHeight;\r\n                }\r\n                // 如果没有设置轨道数，则在获取到所有高度后计算出最大轨道数\r\n                if (!danmaku.channels) {\r\n                    calcChannels.value = Math.floor(containerHeight.value / (danmu.height + danmu.top));\r\n                }\r\n                let channelIndex = getChannelIndex(el);\r\n                if (channelIndex >= 0) {\r\n                    const width = el.offsetWidth;\r\n                    const height = danmu.height;\r\n                    el.classList.add('move');\r\n                    el.dataset.index = `${_index}`;\r\n                    el.style.opacity = '1';\r\n                    el.style.top = channelIndex * (height + danmu.top) + 'px';\r\n                    el.style.width = width + danmu.right + 'px';\r\n                    el.style.setProperty('--dm-scroll-width', `-${containerWidth.value + width}px`);\r\n                    el.style.left = `${containerWidth.value}px`;\r\n                    el.style.animationDuration = `${containerWidth.value / danmu.speeds}s`;\r\n                    el.addEventListener('animationend', () => {\r\n                        if (Number(el.dataset.index) === danmuList.value.length - 1 && !danmaku.loop) {\r\n                            emit('play-end', el.dataset.index);\r\n                        }\r\n                        dmContainer.value && dmContainer.value.removeChild(el);\r\n                    });\r\n                    index.value++;\r\n                }\r\n                else {\r\n                    dmContainer.value.removeChild(el);\r\n                }\r\n            });\r\n        }\r\n        function getSlotComponent(_danmu, _index) {\r\n            const DmComponent = createApp({\r\n                render() {\r\n                    return h('div', {}, [\r\n                        slots.dm &&\r\n                            slots.dm({\r\n                                danmu: _danmu,\r\n                                index: _index,\r\n                            }),\r\n                    ]);\r\n                },\r\n            });\r\n            const ele = DmComponent.mount(document.createElement('div'));\r\n            return ele;\r\n        }\r\n        function getChannelIndex(el) {\r\n            let _channels = [...Array(danmaku.channels).keys()];\r\n            if (danmaku.randomChannel) {\r\n                _channels = _channels.sort(() => 0.5 - Math.random());\r\n            }\r\n            for (let i of _channels) {\r\n                const items = danChannel.value[i];\r\n                if (items && items.length) {\r\n                    for (let j = 0; j < items.length; j++) {\r\n                        const danRight = getDanRight(items[j]) - 10;\r\n                        // 安全距离判断\r\n                        if (danRight <= (el.offsetWidth - items[j].offsetWidth) * 0.88 || danRight <= 0) {\r\n                            break;\r\n                        }\r\n                        if (j === items.length - 1) {\r\n                            danChannel.value[i].push(el);\r\n                            el.addEventListener('animationend', () => danChannel.value[i].splice(0, 1));\r\n                            return i % danmaku.channels;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    danChannel.value[i] = [el];\r\n                    el.addEventListener('animationend', () => danChannel.value[i].splice(0, 1));\r\n                    return i % danmaku.channels;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n        /**\r\n         * 获取弹幕右侧到屏幕右侧的距离\r\n         */\r\n        function getDanRight(el) {\r\n            const eleWidth = el.offsetWidth || parseInt(el.style.width);\r\n            const eleRight = el.getBoundingClientRect().right || dmContainer.value.getBoundingClientRect().right + eleWidth;\r\n            return dmContainer.value.getBoundingClientRect().right - eleRight;\r\n        }\r\n        function clearTimer() {\r\n            clearInterval(timer);\r\n            timer = 0;\r\n        }\r\n        function initSuspendEvents() {\r\n            let suspendDanmus = [];\r\n            dmContainer.value.addEventListener('mousemove', (e) => {\r\n                let target = e.target;\r\n                if (!target.className.includes('dm')) {\r\n                    target = target.closest('.dm') || target;\r\n                }\r\n                if (!target.className.includes('dm'))\r\n                    return;\r\n                target.classList.add('pause');\r\n                suspendDanmus.push(target);\r\n            });\r\n            dmContainer.value.addEventListener('mouseout', (e) => {\r\n                let target = e.target;\r\n                if (!target.className.includes('dm')) {\r\n                    target = target.closest('.dm') || target;\r\n                }\r\n                if (!target.className.includes('dm'))\r\n                    return;\r\n                target.classList.remove('pause');\r\n                suspendDanmus.forEach((item) => {\r\n                    item.classList.remove('pause');\r\n                });\r\n                suspendDanmus = [];\r\n            });\r\n        }\r\n        /**\r\n         * 清空弹幕\r\n         */\r\n        function clear() {\r\n            clearTimer();\r\n            index.value = 0;\r\n        }\r\n        /**\r\n         * 重置弹幕\r\n         */\r\n        function reset() {\r\n            danmuHeight.value = 0;\r\n            init();\r\n        }\r\n        /**\r\n         * 停止弹幕\r\n         */\r\n        function stop() {\r\n            danChannel.value = {};\r\n            dmContainer.value.innerHTML = '';\r\n            paused.value = true;\r\n            hidden.value = false;\r\n            clear();\r\n        }\r\n        /**\r\n         * 暂停弹幕\r\n         */\r\n        function pause() {\r\n            paused.value = true;\r\n        }\r\n        /**\r\n         * 添加弹幕（插入到当前播放的弹幕位置）\r\n         */\r\n        function add(danmu) {\r\n            if (index.value === danmuList.value.length) {\r\n                // 如果当前弹幕已经播放完了，那么仍然走 push\r\n                danmuList.value.push(danmu);\r\n                return danmuList.value.length - 1;\r\n            }\r\n            else {\r\n                const _index = index.value % danmuList.value.length;\r\n                danmuList.value.splice(_index, 0, danmu);\r\n                return _index + 1;\r\n            }\r\n        }\r\n        /**\r\n         * 添加弹幕（插入到弹幕末尾）\r\n         */\r\n        function push(danmu) {\r\n            danmuList.value.push(danmu);\r\n            return danmuList.value.length - 1;\r\n        }\r\n        /**\r\n         * 获取播放状态\r\n         */\r\n        function getPlayState() {\r\n            return !paused.value;\r\n        }\r\n        /**\r\n         * 显示弹幕\r\n         */\r\n        function show() {\r\n            hidden.value = false;\r\n        }\r\n        /**\r\n         * 隐藏弹幕\r\n         */\r\n        function hide() {\r\n            hidden.value = true;\r\n        }\r\n        function resize() {\r\n            initCore();\r\n            const items = dmContainer.value.getElementsByClassName('dm');\r\n            for (let i = 0; i < items.length; i++) {\r\n                const el = items[i];\r\n                el.style.setProperty('--dm-scroll-width', `-${containerWidth.value + el.offsetWidth}px`);\r\n                el.style.left = `${containerWidth.value}px`;\r\n                el.style.animationDuration = `${containerWidth.value / danmu.speeds}s`;\r\n            }\r\n        }\r\n        return {\r\n            // element\r\n            container,\r\n            dmContainer,\r\n            // variable\r\n            hidden,\r\n            paused,\r\n            danmuList,\r\n            // function\r\n            getPlayState,\r\n            resize,\r\n            play,\r\n            pause,\r\n            stop,\r\n            show,\r\n            hide,\r\n            reset,\r\n            add,\r\n            push,\r\n            insert,\r\n        };\r\n    },\r\n});\n\nconst _hoisted_1 = {\n  ref: \"container\",\n  class: \"vue-danmaku\"\n};\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  return (openBlock(), createElementBlock(\"div\", _hoisted_1, [\n    createElementVNode(\"div\", {\n      ref: \"dmContainer\",\n      class: normalizeClass(['danmus', { show: !_ctx.hidden }, { paused: _ctx.paused }])\n    }, null, 2 /* CLASS */),\n    renderSlot(_ctx.$slots, \"default\")\n  ], 512 /* NEED_PATCH */))\n}\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".vue-danmaku {\\n  position: relative;\\n  overflow: hidden;\\n}\\n.vue-danmaku .danmus {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n  opacity: 0;\\n  -webkit-transition: all 0.3s;\\n  transition: all 0.3s;\\n}\\n.vue-danmaku .danmus.show {\\n  opacity: 1;\\n}\\n.vue-danmaku .danmus.paused .dm.move {\\n  animation-play-state: paused;\\n}\\n.vue-danmaku .danmus .dm {\\n  position: absolute;\\n  font-size: 20px;\\n  color: #ddd;\\n  white-space: pre;\\n  transform: translateX(0);\\n  transform-style: preserve-3d;\\n}\\n.vue-danmaku .danmus .dm.move {\\n  will-change: transform;\\n  animation-name: moveLeft;\\n  animation-timing-function: linear;\\n  animation-play-state: running;\\n}\\n.vue-danmaku .danmus .dm.pause {\\n  animation-play-state: paused;\\n  z-index: 10;\\n}\\n@keyframes moveLeft {\\n  from {\\n    transform: translateX(0);\\n  }\\n  to {\\n    transform: translateX(var(--dm-scroll-width));\\n  }\\n}\\n@-webkit-keyframes moveLeft {\\n  from {\\n    -webkit-transform: translateX(0);\\n  }\\n  to {\\n    -webkit-transform: translateX(var(--dm-scroll-width));\\n  }\\n}\";\nstyleInject(css_248z);\n\nscript.render = render;\nscript.__file = \"src/lib/Danmaku.vue\";\n\nexport { script as default };\n","<script setup lang=\"ts\">\nimport { danmus as danmusData, getDanmuData } from \"./danmu.js\";\nimport { onMounted, onUnmounted, reactive, ref } from \"vue\";\nimport VueDanmaku from \"vue3-danmaku\";\n\ndefineOptions({\n  name: \"Danmaku\"\n});\n\nconst danmaku = ref();\nconst danmus = ref<any[]>(getDanmuData());\nconst danmuMsg = ref<string>(\"\");\nlet timer = 0;\nconst config = reactive({\n  channels: 5, // 轨道数量，为0则弹幕轨道数会撑满容器\n  useSlot: true, // 是否开启slot\n  loop: true, // 是否开启弹幕循环\n  speeds: 200, // 弹幕速度，实际为弹幕滚动完一整屏的秒数，值越小速度越快\n  fontSize: 20, // 文本模式下的字号\n  top: 10, // 弹幕轨道间的垂直间距\n  right: 0, // 同一轨道弹幕的水平间距\n  debounce: 100, // 弹幕刷新频率（多少毫秒插入一条弹幕，建议不小于50）\n  randomChannel: true // 随机弹幕轨道\n});\n\nonMounted(() => {\n  window.onresize = () => resizeHandler();\n});\n\nonUnmounted(() => {\n  window.onresize = null;\n});\n\nfunction play(type: string) {\n  switch (type) {\n    case \"play\":\n      danmaku.value.play();\n      break;\n    case \"pause\":\n      danmaku.value.pause();\n      break;\n    case \"stop\":\n      danmaku.value.stop();\n      break;\n    case \"show\":\n      danmaku.value.show();\n      break;\n    case \"hide\":\n      danmaku.value.hide();\n      break;\n    case \"reset\":\n      danmaku.value.reset();\n      break;\n    default:\n      break;\n  }\n}\n\nfunction switchSlot(slot: boolean) {\n  config.useSlot = slot;\n  danmus.value = slot ? getDanmuData() : danmusData;\n\n  setTimeout(() => {\n    danmaku.value.stop();\n    danmaku.value.play();\n  });\n}\nfunction speedsChange(val: number) {\n  if (config.speeds <= 10 && val === -10) {\n    return;\n  }\n  config.speeds += val;\n  danmaku.value.reset();\n}\nfunction fontChange(val: number) {\n  config.fontSize += val;\n  danmaku.value.reset();\n}\nfunction channelChange(val: number) {\n  if (!config.channels && val === -1) {\n    return;\n  }\n  config.channels += val;\n}\nfunction resizeHandler() {\n  if (timer) clearTimeout(timer);\n  timer = window.setTimeout(() => {\n    danmaku.value.resize();\n  }, 500);\n}\nfunction addDanmu() {\n  if (!danmuMsg.value) return;\n  const _danmuMsg = config.useSlot\n    ? {\n        avatar: \"https://i.loli.net/2021/01/17/xpwbm3jKytfaNOD.jpg\",\n        name: \"你\",\n        text: danmuMsg.value\n      }\n    : danmuMsg.value;\n  danmaku.value.add(_danmuMsg);\n  danmuMsg.value = \"\";\n}\n</script>\n<template>\n  <el-card shadow=\"never\">\n    <template #header>\n      <div class=\"card-header\">\n        <span class=\"font-medium\">\n          弹幕组件，采用开源的\n          <el-link\n            href=\"https://github.com/hellodigua/vue-danmaku/tree/vue3\"\n            target=\"_blank\"\n            style=\"margin: 0 4px 5px; font-size: 16px\"\n          >\n            vue3-danmaku\n          </el-link>\n        </span>\n      </div>\n    </template>\n    <div class=\"flex gap-5\">\n      <vue-danmaku\n        ref=\"danmaku\"\n        class=\"demo\"\n        v-model:danmus=\"danmus\"\n        isSuspend\n        v-bind=\"config\"\n      >\n        <!-- 弹幕slot -->\n        <template v-slot:dm=\"{ danmu, index }\">\n          <div class=\"danmu-item\">\n            <img class=\"img\" :src=\"danmu.avatar\" />\n            <span>{{ index }}{{ danmu.name }}：</span>\n            <span>{{ danmu.text }}</span>\n          </div>\n        </template>\n      </vue-danmaku>\n      <div class=\"main\">\n        <p>\n          播放：\n          <el-button @click=\"play('play')\">播放</el-button>\n          <el-button @click=\"play('pause')\">暂停</el-button>\n          <el-button @click=\"play('stop')\">停止</el-button>\n        </p>\n        <p>\n          模式：\n          <el-button @click=\"switchSlot(true)\">弹幕 slot</el-button>\n          <el-button @click=\"switchSlot(false)\">普通文本</el-button>\n        </p>\n        <p>\n          显示：\n          <el-button @click=\"play('show')\">显示</el-button>\n          <el-button @click=\"play('hide')\">隐藏</el-button>\n        </p>\n        <p>\n          速度：\n          <el-button @click=\"speedsChange(-10)\">减速</el-button>\n          <el-button @click=\"speedsChange(10)\">增速</el-button>\n          <span class=\"ml-5\">当前速度：{{ config.speeds }}像素/s</span>\n        </p>\n        <p>\n          字号：\n          <el-button :disabled=\"config.useSlot\" @click=\"fontChange(-1)\">\n            缩小\n          </el-button>\n          <el-button :disabled=\"config.useSlot\" @click=\"fontChange(1)\">\n            放大\n          </el-button>\n          <span class=\"ml-5\">当前字号：{{ config.fontSize }}px</span>\n        </p>\n        <p>\n          轨道：\n          <el-button @click=\"channelChange(-1)\">-1</el-button>\n          <el-button @click=\"channelChange(1)\">+1</el-button>\n          <el-button @click=\"channelChange(-config.channels)\"> 填满 </el-button>\n          <span class=\"ml-5\">当前轨道：{{ config.channels }}</span>\n        </p>\n        <p class=\"flex\">\n          <el-input\n            type=\"text\"\n            placeholder=\"输入评论后，回车发送弹幕\"\n            v-model=\"danmuMsg\"\n            @keyup.enter=\"addDanmu\"\n          />\n        </p>\n      </div>\n    </div>\n  </el-card>\n</template>\n<style lang=\"scss\">\n.demo {\n  flex: 1;\n  height: 600px;\n  background: linear-gradient(45deg, #5ac381, #20568b);\n\n  .danmu-item {\n    display: flex;\n    align-items: center;\n\n    .img {\n      width: 25px;\n      height: 25px;\n      margin-right: 5px;\n      border-radius: 50%;\n    }\n  }\n}\n\n.main {\n  flex: 1;\n\n  p {\n    margin-top: 10px;\n  }\n}\n</style>\n"],"names":["customDanmus","danmus","getDanmuData","text","index","_index","useModelWrapper","props","emit","name","translater","computed","value","script","defineComponent","slots","container","ref","dmContainer","containerWidth","containerHeight","timer","calcChannels","danmuHeight","hidden","paused","danChannel","danmuList","danmaku","reactive","danmu","onMounted","init","onBeforeUnmount","clear","initCore","initSuspendEvents","play","draw","screenDanmus","insert","dm","_danmu","el","getSlotComponent","nextTick","channelIndex","getChannelIndex","width","height","createApp","h","_channels","i","items","j","danRight","getDanRight","eleWidth","eleRight","clearTimer","suspendDanmus","e","target","item","reset","stop","pause","add","push","getPlayState","show","hide","resize","_hoisted_1","render","_ctx","_cache","$props","$setup","$data","$options","openBlock","createElementBlock","createElementVNode","normalizeClass","renderSlot","styleInject","css","insertAt","head","style","css_248z","danmuMsg","config","resizeHandler","onUnmounted","type","switchSlot","slot","danmusData","speedsChange","val","fontChange","channelChange","addDanmu","_danmuMsg"],"mappings":"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","x_google_ignoreList":[1]}