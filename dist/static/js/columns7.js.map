{"version":3,"file":"columns7.js","sources":["../../../src/views/pure-table/high/drag/row/columns.tsx"],"sourcesContent":["import Sortable from \"sortablejs\";\nimport { ref, nextTick } from \"vue\";\nimport { clone } from \"@pureadmin/utils\";\nimport { tableDataDrag } from \"../../data\";\n\n// 行拖拽演示\nexport function useColumns() {\n  const dataList = ref(clone(tableDataDrag, true));\n\n  const rowDrop = (event: { preventDefault: () => void }) => {\n    event.preventDefault();\n    nextTick(() => {\n      const wrapper: HTMLElement = document.querySelector(\n        \".el-table__body-wrapper tbody\"\n      );\n      Sortable.create(wrapper, {\n        animation: 300,\n        handle: \".drag-btn\",\n        onEnd: ({ newIndex, oldIndex }) => {\n          const currentRow = dataList.value.splice(oldIndex, 1)[0];\n          dataList.value.splice(newIndex, 0, currentRow);\n        }\n      });\n    });\n  };\n\n  const columns: TableColumnList = [\n    // {\n    //   width: 60,\n    //   cellRenderer: () => (\n    //     <iconify-icon-online\n    //       icon=\"icon-park-outline:drag\"\n    //       class=\"drag-btn cursor-grab\"\n    //       onMouseenter={(event: { preventDefault: () => void }) =>\n    //         rowDrop(event)\n    //       }\n    //     />\n    //   )\n    // },\n    {\n      label: \"ID\",\n      prop: \"id\",\n      cellRenderer: ({ row }) => (\n        <div class=\"flex items-center\">\n          <iconify-icon-online\n            icon=\"icon-park-outline:drag\"\n            class=\"drag-btn cursor-grab\"\n            onMouseenter={(event: { preventDefault: () => void }) =>\n              rowDrop(event)\n            }\n          />\n          <p class=\"ml-[16px]\">{row.id}</p>\n        </div>\n      )\n    },\n    {\n      label: \"日期\",\n      prop: \"date\"\n    },\n    {\n      label: \"姓名\",\n      prop: \"name\"\n    }\n  ];\n\n  return {\n    columns,\n    dataList\n  };\n}\n"],"names":["useColumns","dataList","ref","clone","tableDataDrag","rowDrop","event","preventDefault","nextTick","wrapper","document","querySelector","Sortable","create","animation","handle","onEnd","newIndex","oldIndex","currentRow","value","splice","columns","label","prop","cellRenderer","row","_createVNode","_resolveComponent","id"],"mappings":"gIAMO,SAASA,GAAa,CAC3B,MAAMC,EAAWC,EAAIC,EAAMC,EAAe,EAAI,CAAC,EAEzCC,EAAWC,GAA0C,CACzDA,EAAMC,eAAc,EACpBC,EAAS,IAAM,CACb,MAAMC,EAAuBC,SAASC,cACpC,+BACF,EACAC,EAASC,OAAOJ,EAAS,CACvBK,UAAW,IACXC,OAAQ,YACRC,MAAOA,CAAC,CAAEC,SAAAA,EAAUC,SAAAA,CAAS,IAAM,CACjC,MAAMC,EAAalB,EAASmB,MAAMC,OAAOH,EAAU,CAAC,EAAE,CAAC,EACvDjB,EAASmB,MAAMC,OAAOJ,EAAU,EAAGE,CAAU,CAC/C,CACF,CAAC,CACH,CAAC,GA0CH,MAAO,CACLG,QAxC+B,CAa/B,CACEC,MAAO,KACPC,KAAM,KACNC,aAAcA,CAAC,CAAEC,IAAAA,CAAI,IAACC,EAAA,MAAA,CAAA,MAAA,mBAAAA,EAAAA,CAAAA,EAAAC,EAAA,qBAAA,EAAA,CAAA,KAAA,yBAAA,MAAA,uBAAA,aAKDtB,GACbD,EAAQC,CAAK,CAAC,EAAA,IAAA,EAAAqB,EAAA,IAAA,CAAA,MAAA,WAGID,EAAAA,CAAAA,EAAIG,EAAE,CAAA,CAAA,CAAA,CAGlC,EACA,CACEN,MAAO,KACPC,KAAM,MACR,EACA,CACED,MAAO,KACPC,KAAM,MACR,CAAC,EAKDvB,SAAAA,EAEJ"}