{"version":3,"file":"index59.js","sources":["../../../src/views/tabs/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport {\n  deleteChildren,\n  getNodeByUniqueId,\n  appendFieldByUniqueId\n} from \"@/utils/tree\";\nimport { useDetail } from \"./hooks\";\nimport { ref, computed } from \"vue\";\nimport { clone } from \"@pureadmin/utils\";\nimport { transformI18n } from \"@/plugins/i18n\";\nimport { useMultiTagsStoreHook } from \"@/store/modules/multiTags\";\nimport { usePermissionStoreHook } from \"@/store/modules/permission\";\n\ndefineOptions({\n  name: \"Tabs\"\n});\n\nconst { toDetail, router } = useDetail();\nconst menusTree = clone(usePermissionStoreHook().wholeMenus, true);\n\nconst treeData = computed(() => {\n  return appendFieldByUniqueId(deleteChildren(menusTree), 0, {\n    disabled: true\n  });\n});\n\nconst currentValues = ref<string[]>([]);\n\nconst multiTags = computed(() => {\n  return useMultiTagsStoreHook()?.multiTags;\n});\n\nfunction onCloseTags() {\n  if (currentValues.value.length === 0) return;\n  currentValues.value.forEach(uniqueId => {\n    const currentPath =\n      getNodeByUniqueId(treeData.value, uniqueId).redirect ??\n      getNodeByUniqueId(treeData.value, uniqueId).path;\n    useMultiTagsStoreHook().handleTags(\"splice\", currentPath);\n    if (currentPath === \"/tabs/index\")\n      router.push({\n        path: multiTags.value[(multiTags as any).value.length - 1].path\n      });\n  });\n}\n</script>\n\n<template>\n  <el-card shadow=\"never\">\n    <template #header>\n      <div>标签页复用，超出限制自动关闭</div>\n    </template>\n    <div class=\"flex flex-wrap items-center\">\n      <p>query传参模式：</p>\n      <el-button\n        class=\"m-2\"\n        v-for=\"index in 6\"\n        :key=\"index\"\n        @click=\"toDetail({ id: index }, 'query')\"\n      >\n        打开{{ index }}详情页\n      </el-button>\n      <el-button\n        @click=\"\n          toDetail({ id: 666, name: '小明', age: 18, job: '工程师' }, 'query')\n        \"\n      >\n        多个参数\n      </el-button>\n    </div>\n\n    <el-divider />\n\n    <div class=\"flex flex-wrap items-center\">\n      <p>params传参模式：</p>\n      <el-button\n        class=\"m-2\"\n        v-for=\"index in 6\"\n        :key=\"index\"\n        @click=\"toDetail({ id: index }, 'params')\"\n      >\n        打开{{ index }}详情页\n      </el-button>\n    </div>\n\n    <el-divider />\n    <el-tree-select\n      class=\"w-[300px]\"\n      node-key=\"uniqueId\"\n      placeholder=\"请选择要关闭的标签\"\n      clearable\n      multiple\n      filterable\n      default-expand-all\n      :props=\"{\n        label: data => transformI18n(data.meta.title),\n        value: 'uniqueId',\n        children: 'children',\n        disabled: 'disabled'\n      }\"\n      :data=\"treeData\"\n      v-model=\"currentValues\"\n    >\n      <template #default=\"{ data }\">\n        <span>{{ transformI18n(data.meta.title) }}</span>\n      </template>\n    </el-tree-select>\n    <el-button class=\"m-2\" @click=\"onCloseTags\">关闭标签</el-button>\n\n    <el-divider />\n    <el-button @click=\"router.push({ name: 'Menu1-2-2' })\">\n      跳转页内菜单（传name对象，优先推荐）\n    </el-button>\n    <el-button @click=\"router.push('/nested/menu1/menu1-2/menu1-2-2')\">\n      跳转页内菜单（直接传要跳转的路径）\n    </el-button>\n    <el-button\n      @click=\"router.push({ path: '/nested/menu1/menu1-2/menu1-2-2' })\"\n    >\n      跳转页内菜单（传path对象）\n    </el-button>\n\n    <el-divider />\n    <el-button\n      @click=\"\n        router.push({\n          name: 'Menu1-2-2',\n          query: { text: '传name对象，优先推荐' }\n        })\n      \"\n    >\n      携参跳转页内菜单（传name对象，优先推荐）\n    </el-button>\n    <el-button\n      @click=\"\n        router.push({\n          path: '/nested/menu1/menu1-2/menu1-2-2',\n          query: { text: '传path对象' }\n        })\n      \"\n    >\n      携参跳转页内菜单（传path对象）\n    </el-button>\n    <el-link\n      class=\"ml-4\"\n      href=\"https://router.vuejs.org/zh/guide/essentials/navigation.html#%E5%AF%BC%E8%88%AA%E5%88%B0%E4%B8%8D%E5%90%8C%E7%9A%84%E4%BD%8D%E7%BD%AE\"\n      target=\"_blank\"\n    >\n      点击查看更多跳转方式\n    </el-link>\n\n    <el-divider />\n    <el-button @click=\"router.push({ name: 'Empty' })\">\n      跳转无Layout的空白页面\n    </el-button>\n  </el-card>\n</template>\n"],"names":["toDetail","router","useDetail","menusTree","clone","usePermissionStoreHook","treeData","computed","appendFieldByUniqueId","deleteChildren","currentValues","ref","multiTags","_a","useMultiTagsStoreHook","onCloseTags","uniqueId","currentPath","getNodeByUniqueId"],"mappings":"gbAiBA,KAAM,CAAE,SAAAA,EAAU,OAAAC,CAAO,EAAIC,EAAU,EACjCC,EAAYC,EAAMC,EAAuB,EAAE,WAAY,EAAI,EAE3DC,EAAWC,EAAS,IACjBC,EAAsBC,EAAeN,CAAS,EAAG,EAAG,CACzD,SAAU,EAAA,CACX,CACF,EAEKO,EAAgBC,EAAc,CAAA,CAAE,EAEhCC,EAAYL,EAAS,IAAM,OAC/B,OAAOM,EAAAC,EAAyB,IAAzB,YAAAD,EAAyB,SAAA,CACjC,EAED,SAASE,GAAc,CACjBL,EAAc,MAAM,SAAW,GACrBA,EAAA,MAAM,QAAoBM,GAAA,CAChC,MAAAC,EACJC,EAAkBZ,EAAS,MAAOU,CAAQ,EAAE,UAC5CE,EAAkBZ,EAAS,MAAOU,CAAQ,EAAE,KACxBF,IAAE,WAAW,SAAUG,CAAW,EACpDA,IAAgB,eAClBhB,EAAO,KAAK,CACV,KAAMW,EAAU,MAAOA,EAAkB,MAAM,OAAS,CAAC,EAAE,IAAA,CAC5D,CAAA,CACJ,CACH"}