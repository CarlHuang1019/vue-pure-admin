import{M as d}from"./motion.js";import{d as w,a1 as R,r as C,al as B,c as f,g as N,f as S,w as o,j as l,u as e,h as T,i as _,t as g,q as U,K as z,d7 as F,dq as I}from"./index.js";import{u as y,p as $}from"./verifyCode.js";import{u as V}from"./hooks.js";import{d as j}from"./iphone.js";const q={class:"w-full flex justify-between"},K=w({__name:"phone",setup(D){const{t:n}=R(),r=C(!1),t=B({phone:"",verifyCode:""}),p=C(),{isDisabled:h,text:v}=y(),k=async m=>{r.value=!0,m&&await m.validate((a,i)=>{if(a)setTimeout(()=>{U(z(F("login.loginSuccess")),{type:"success"}),r.value=!1},2e3);else return r.value=!1,i})};function x(){y().end(),I().SET_CURRENTPAGE(0)}return(m,a)=>{const i=f("el-input"),u=f("el-form-item"),c=f("el-button"),b=f("el-form");return N(),S(b,{ref_key:"ruleFormRef",ref:p,model:t,rules:e($),size:"large"},{default:o(()=>[l(e(d),null,{default:o(()=>[l(u,{prop:"phone"},{default:o(()=>[l(i,{clearable:"",modelValue:t.phone,"onUpdate:modelValue":a[0]||(a[0]=s=>t.phone=s),placeholder:e(n)("login.phone"),"prefix-icon":e(V)(e(j))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),l(e(d),{delay:100},{default:o(()=>[l(u,{prop:"verifyCode"},{default:o(()=>[T("div",q,[l(i,{clearable:"",modelValue:t.verifyCode,"onUpdate:modelValue":a[1]||(a[1]=s=>t.verifyCode=s),placeholder:e(n)("login.smsVerifyCode"),"prefix-icon":e(V)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),l(c,{disabled:e(h),class:"ml-2",onClick:a[2]||(a[2]=s=>e(y)().start(p.value,"phone"))},{default:o(()=>[_(g(e(v).length>0?e(v)+e(n)("login.info"):e(n)("login.getVerifyCode")),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),l(e(d),{delay:150},{default:o(()=>[l(u,null,{default:o(()=>[l(c,{class:"w-full",size:"default",type:"primary",loading:r.value,onClick:a[3]||(a[3]=s=>k(p.value))},{default:o(()=>[_(g(e(n)("login.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),l(e(d),{delay:200},{default:o(()=>[l(u,null,{default:o(()=>[l(c,{class:"w-full",size:"default",onClick:x},{default:o(()=>[_(g(e(n)("login.back")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{K as _};
