{"version":3,"file":"form.vue_vue_type_script_setup_true_lang2.js","sources":["../../../src/views/system/dept/utils/rule.ts","../../../src/views/system/dept/form.vue"],"sourcesContent":["import { reactive } from \"vue\";\nimport type { FormRules } from \"element-plus\";\nimport { isPhone, isEmail } from \"@pureadmin/utils\";\n\n/** 自定义表单规则校验 */\nexport const formRules = reactive(<FormRules>{\n  name: [{ required: true, message: \"部门名称为必填项\", trigger: \"blur\" }],\n  phone: [\n    {\n      validator: (rule, value, callback) => {\n        if (value === \"\") {\n          callback();\n        } else if (!isPhone(value)) {\n          callback(new Error(\"请输入正确的手机号码格式\"));\n        } else {\n          callback();\n        }\n      },\n      trigger: \"blur\"\n      // trigger: \"click\" // 如果想在点击确定按钮时触发这个校验，trigger 设置成 click 即可\n    }\n  ],\n  email: [\n    {\n      validator: (rule, value, callback) => {\n        if (value === \"\") {\n          callback();\n        } else if (!isEmail(value)) {\n          callback(new Error(\"请输入正确的邮箱格式\"));\n        } else {\n          callback();\n        }\n      },\n      trigger: \"blur\"\n    }\n  ]\n});\n","<script setup lang=\"ts\">\nimport { ref } from \"vue\";\nimport ReCol from \"@/components/ReCol\";\nimport { formRules } from \"./utils/rule\";\nimport { FormProps } from \"./utils/types\";\nimport { usePublicHooks } from \"../hooks\";\n\nconst props = withDefaults(defineProps<FormProps>(), {\n  formInline: () => ({\n    higherDeptOptions: [],\n    parentId: 0,\n    name: \"\",\n    principal: \"\",\n    phone: \"\",\n    email: \"\",\n    sort: 0,\n    status: 1,\n    remark: \"\"\n  })\n});\n\nconst ruleFormRef = ref();\nconst { switchStyle } = usePublicHooks();\nconst newFormInline = ref(props.formInline);\n\nfunction getRef() {\n  return ruleFormRef.value;\n}\n\ndefineExpose({ getRef });\n</script>\n\n<template>\n  <el-form\n    ref=\"ruleFormRef\"\n    :model=\"newFormInline\"\n    :rules=\"formRules\"\n    label-width=\"82px\"\n  >\n    <el-row :gutter=\"30\">\n      <re-col>\n        <el-form-item label=\"上级部门\">\n          <el-cascader\n            class=\"w-full\"\n            v-model=\"newFormInline.parentId\"\n            :options=\"newFormInline.higherDeptOptions\"\n            :props=\"{\n              value: 'id',\n              label: 'name',\n              emitPath: false,\n              checkStrictly: true\n            }\"\n            clearable\n            filterable\n            placeholder=\"请选择上级部门\"\n          >\n            <template #default=\"{ node, data }\">\n              <span>{{ data.name }}</span>\n              <span v-if=\"!node.isLeaf\"> ({{ data.children.length }}) </span>\n            </template>\n          </el-cascader>\n        </el-form-item>\n      </re-col>\n\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"部门名称\" prop=\"name\">\n          <el-input\n            v-model=\"newFormInline.name\"\n            clearable\n            placeholder=\"请输入部门名称\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"部门负责人\">\n          <el-input\n            v-model=\"newFormInline.principal\"\n            clearable\n            placeholder=\"请输入部门负责人\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"手机号\" prop=\"phone\">\n          <el-input\n            v-model=\"newFormInline.phone\"\n            clearable\n            placeholder=\"请输入手机号\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input\n            v-model=\"newFormInline.email\"\n            clearable\n            placeholder=\"请输入邮箱\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"排序\">\n          <el-input-number\n            v-model=\"newFormInline.sort\"\n            :min=\"0\"\n            :max=\"9999\"\n            controls-position=\"right\"\n          />\n        </el-form-item>\n      </re-col>\n      <re-col :value=\"12\" :xs=\"24\" :sm=\"24\">\n        <el-form-item label=\"部门状态\">\n          <el-switch\n            v-model=\"newFormInline.status\"\n            inline-prompt\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n            active-text=\"启用\"\n            inactive-text=\"停用\"\n            :style=\"switchStyle\"\n          />\n        </el-form-item>\n      </re-col>\n\n      <re-col>\n        <el-form-item label=\"备注\">\n          <el-input\n            v-model=\"newFormInline.remark\"\n            placeholder=\"请输入备注信息\"\n            type=\"textarea\"\n          />\n        </el-form-item>\n      </re-col>\n    </el-row>\n  </el-form>\n</template>\n"],"names":["formRules","reactive","rule","value","callback","isPhone","isEmail","ruleFormRef","ref","switchStyle","usePublicHooks","newFormInline","props","getRef","__expose"],"mappings":"uMAKO,MAAMA,EAAYC,EAAoB,CAC3C,KAAM,CAAC,CAAE,SAAU,GAAM,QAAS,WAAY,QAAS,OAAQ,EAC/D,MAAO,CACL,CACE,UAAW,CAACC,EAAMC,EAAOC,IAAa,CAChCD,IAAU,IAEFE,EAAQF,CAAK,EADdC,IAEAA,EAAA,IAAI,MAAM,cAAc,CAAC,CAItC,EACA,QAAS,MAEX,CACF,EACA,MAAO,CACL,CACE,UAAW,CAACF,EAAMC,EAAOC,IAAa,CAChCD,IAAU,IAEFG,EAAQH,CAAK,EADdC,IAEAA,EAAA,IAAI,MAAM,YAAY,CAAC,CAIpC,EACA,QAAS,MACX,CACF,CACF,CAAC,mMCfKG,EAAcC,IACd,CAAE,YAAAC,GAAgBC,IAClBC,EAAgBH,EAAII,EAAM,UAAU,EAE1C,SAASC,GAAS,CAChB,OAAON,EAAY,KACrB,CAEa,OAAAO,EAAA,CAAE,OAAAD,EAAQ"}