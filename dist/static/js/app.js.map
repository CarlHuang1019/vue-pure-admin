{"version":3,"file":"app.js","sources":["../../../src/store/modules/app.ts"],"sourcesContent":["import { store } from \"@/store\";\nimport { appType } from \"./types\";\nimport { defineStore } from \"pinia\";\nimport { getConfig, responsiveStorageNameSpace } from \"@/config\";\nimport { deviceDetection, storageLocal } from \"@pureadmin/utils\";\n\nexport const useAppStore = defineStore({\n  id: \"pure-app\",\n  state: (): appType => ({\n    sidebar: {\n      opened:\n        storageLocal().getItem<StorageConfigs>(\n          `${responsiveStorageNameSpace()}layout`\n        )?.sidebarStatus ?? getConfig().SidebarStatus,\n      withoutAnimation: false,\n      isClickCollapse: false\n    },\n    // 这里的layout用于监听容器拖拉后恢复对应的导航模式\n    layout:\n      storageLocal().getItem<StorageConfigs>(\n        `${responsiveStorageNameSpace()}layout`\n      )?.layout ?? getConfig().Layout,\n    device: deviceDetection() ? \"mobile\" : \"desktop\",\n    // 作用于 src/views/components/draggable/index.vue 页面，当离开页面并不会销毁 new Swap()，sortablejs 官网也没有提供任何销毁的 api\n    sortSwap: false\n  }),\n  getters: {\n    getSidebarStatus(state) {\n      return state.sidebar.opened;\n    },\n    getDevice(state) {\n      return state.device;\n    }\n  },\n  actions: {\n    TOGGLE_SIDEBAR(opened?: boolean, resize?: string) {\n      const layout = storageLocal().getItem<StorageConfigs>(\n        `${responsiveStorageNameSpace()}layout`\n      );\n      if (opened && resize) {\n        this.sidebar.withoutAnimation = true;\n        this.sidebar.opened = true;\n        layout.sidebarStatus = true;\n      } else if (!opened && resize) {\n        this.sidebar.withoutAnimation = true;\n        this.sidebar.opened = false;\n        layout.sidebarStatus = false;\n      } else if (!opened && !resize) {\n        this.sidebar.withoutAnimation = false;\n        this.sidebar.opened = !this.sidebar.opened;\n        this.sidebar.isClickCollapse = !this.sidebar.opened;\n        layout.sidebarStatus = this.sidebar.opened;\n      }\n      storageLocal().setItem(`${responsiveStorageNameSpace()}layout`, layout);\n    },\n    async toggleSideBar(opened?: boolean, resize?: string) {\n      await this.TOGGLE_SIDEBAR(opened, resize);\n    },\n    toggleDevice(device: string) {\n      this.device = device;\n    },\n    setLayout(layout) {\n      this.layout = layout;\n    },\n    setSortSwap(val) {\n      this.sortSwap = val;\n    }\n  }\n});\n\nexport function useAppStoreHook() {\n  return useAppStore(store);\n}\n"],"names":["useAppStore","defineStore","storageLocal","responsiveStorageNameSpace","getConfig","deviceDetection","state","opened","resize","layout","device","val","useAppStoreHook","store"],"mappings":"wEAMO,MAAMA,EAAcC,EAAY,CACrC,GAAI,WACJ,MAAO,IAAgB,SAAA,OACrB,QAAS,CACP,SACEC,EAAAA,IAAe,QACb,GAAGC,EAA4B,CAAA,QAAA,IADjCD,YAAAA,EAEG,gBAAiBE,EAAA,EAAY,cAClC,iBAAkB,GAClB,gBAAiB,EACnB,EAEA,SACEF,EAAAA,IAAe,QACb,GAAGC,EAA4B,CAAA,QAAA,IADjCD,YAAAA,EAEG,SAAUE,EAAA,EAAY,OAC3B,OAAQC,IAAoB,SAAW,UAEvC,SAAU,EAAA,GAEZ,QAAS,CACP,iBAAiBC,EAAO,CACtB,OAAOA,EAAM,QAAQ,MACvB,EACA,UAAUA,EAAO,CACf,OAAOA,EAAM,MACf,CACF,EACA,QAAS,CACP,eAAeC,EAAkBC,EAAiB,CAC1C,MAAAC,EAASP,IAAe,QAC5B,GAAGC,EAA4B,CAAA,QAAA,EAE7BI,GAAUC,GACZ,KAAK,QAAQ,iBAAmB,GAChC,KAAK,QAAQ,OAAS,GACtBC,EAAO,cAAgB,IACd,CAACF,GAAUC,GACpB,KAAK,QAAQ,iBAAmB,GAChC,KAAK,QAAQ,OAAS,GACtBC,EAAO,cAAgB,IACd,CAACF,GAAU,CAACC,IACrB,KAAK,QAAQ,iBAAmB,GAChC,KAAK,QAAQ,OAAS,CAAC,KAAK,QAAQ,OACpC,KAAK,QAAQ,gBAAkB,CAAC,KAAK,QAAQ,OACtCC,EAAA,cAAgB,KAAK,QAAQ,QAEtCP,EAAA,EAAe,QAAQ,GAAGC,EAA2B,CAAC,SAAUM,CAAM,CACxE,EACA,MAAM,cAAcF,EAAkBC,EAAiB,CAC/C,MAAA,KAAK,eAAeD,EAAQC,CAAM,CAC1C,EACA,aAAaE,EAAgB,CAC3B,KAAK,OAASA,CAChB,EACA,UAAUD,EAAQ,CAChB,KAAK,OAASA,CAChB,EACA,YAAYE,EAAK,CACf,KAAK,SAAWA,CAClB,CACF,CACF,CAAC,EAEM,SAASC,GAAkB,CAChC,OAAOZ,EAAYa,CAAK,CAC1B"}