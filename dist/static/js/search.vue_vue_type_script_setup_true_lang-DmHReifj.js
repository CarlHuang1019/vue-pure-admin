var Y=Object.defineProperty,A=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var I=(t,o,l)=>o in t?Y(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,V=(t,o)=>{for(var l in o||(o={}))H.call(o,l)&&I(t,l,o[l]);if(R)for(var l of R(o))J.call(o,l)&&I(t,l,o[l]);return t},L=(t,o)=>A(t,G(o));var T=(t,o,l)=>new Promise((p,d)=>{var h=r=>{try{n(l.next(r))}catch(m){d(m)}},s=r=>{try{n(l.throw(r))}catch(m){d(m)}},n=r=>r.done?p(r.value):Promise.resolve(r.value).then(h,s);n((l=l.apply(t,o)).next())});import{f as C,g as M,b as O,c as Q,_ as W}from"./_plugin-vue_export-helper-BNu6E7Ie.js";import{u as Z,P as ee}from"./plus-form-D0Z4Aosf.js";import{d as q,r as j,b as ae,d7 as le,c as E,u as a,fc as oe,w as se,b4 as te,e as c,f,aq as re,y as k,j as u,S as v,ar as U,b7 as N,bX as ne,bp as B,fq as ue,l as F,t as $,K as D,m as x,fr as pe,bY as de,fs as ie,ft as ce,a6 as fe}from"./index-DZuaHQDs.js";var he=q({name:"PlusSearch",__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset"],setup(t,{expose:o,emit:l}){const p=t,{t:d}=Z(),h=j(),s=ae({values:{},subColumns:[],originData:[],isShowUnfold:!1}),n=le(),r=C(n,M()),m=C(n,O()),z=C(n,Q());s.originData=E(()=>p.columns.filter(e=>a(e.hideInSearch)!==!0).map(e=>L(V({},e),{hideInForm:!1}))),s.subColumns=E(()=>{const e=oe(s.originData);return p.hasUnfold&&!s.isShowUnfold?e.slice(0,p.showNumber):e}),se(()=>p.modelValue,e=>{s.values=e},{immediate:!0});const K=(e,g)=>T(this,null,function*(){l("change",e,g),l("update:modelValue",e)}),S=()=>T(this,null,function*(){l("search",s.values)}),w=()=>{s.values=V({},p.defaultValues),l("reset",s.values)},_=()=>{s.isShowUnfold=!s.isShowUnfold};o({plusFormInstance:h,handleReset:w,handleSearch:S,handleUnfold:_});const{isShowUnfold:P,subColumns:X}=te(s);return(e,g)=>(c(),f(a(ee),fe({ref_key:"plusFormInstance",ref:h},e.$attrs,{modelValue:s.values,"onUpdate:modelValue":g[0]||(g[0]=y=>s.values=y),inline:e.inline,"row-props":e.rowProps,"col-props":e.colProps,columns:a(X),class:"plus-search","has-footer":!1,onChange:K}),re({"search-footer":u(()=>[e.hasFooter?(c(),f(a(ne),{key:0,class:"plus-search__button__wrapper"},{default:u(()=>[v(e.$slots,"footer",{isShowUnfold:a(P),handleReset:w,handleSearch:S,handleUnfold:_},()=>[e.hasReset?(c(),f(a(B),{key:0,icon:a(ue),onClick:w},{default:u(()=>[F($(e.resetText||a(d)("plus.search.resetText")),1)]),_:1},8,["icon"])):D("v-if",!0),x(a(B),{type:"primary",loading:e.searchLoading,icon:a(pe),onClick:S},{default:u(()=>[F($(e.searchText||a(d)("plus.search.searchText")),1)]),_:1},8,["loading","icon"]),e.hasUnfold&&s.originData.length>e.showNumber?(c(),f(a(B),{key:1,type:"primary",link:"",onClick:_},{default:u(()=>[F($(a(P)?a(d)("plus.search.retract"):a(d)("plus.search.expand"))+" ",1),x(a(de),null,{default:u(()=>[a(P)?(c(),f(a(ie),{key:0})):(c(),f(a(ce),{key:1}))]),_:1})]),_:1})):D("v-if",!0)])]),_:3})):D("v-if",!0)]),_:2},[k(a(r),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),k(a(m),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),k(a(z),(y,i)=>({name:i,fn:u(b=>[v(e.$slots,i,U(N(b)))])})),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:u(()=>[v(e.$slots,"tooltip-icon")]),key:"0"}:void 0]),1040,["modelValue","inline","row-props","col-props","columns"]))}}),me=W(he,[["__file","index.vue"]]);const be=me,we=q({__name:"search",setup(t){const o=j({status:"0",time:new Date().toString()}),l=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],p=s=>{},d=s=>{},h=()=>{};return(s,n)=>(c(),f(a(be),{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=r=>o.value=r),columns:l,"show-number":2,"label-width":"80","label-position":"right",onChange:p,onSearch:d,onReset:h},null,8,["modelValue"]))}});export{we as _};
