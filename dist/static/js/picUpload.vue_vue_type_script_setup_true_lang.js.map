{"version":3,"file":"picUpload.vue_vue_type_script_setup_true_lang.js","sources":["../../../src/views/editor/components/picUpload.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { onBeforeUnmount, ref, shallowRef } from \"vue\";\nimport \"@wangeditor/editor/dist/css/style.css\";\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\n\ndefineOptions({\n  name: \"picUpload\"\n});\n\nconst mode = \"default\";\n// 编辑器实例，必须用 shallowRef\nconst editorRef = shallowRef();\n\n// 内容 HTML\nconst valueHtml = ref(\n  \"<p>仅提供代码参考，暂不可上传图片，可根据实际业务改写</p>\"\n);\nconst toolbarConfig: any = { excludeKeys: \"fullScreen\" };\nconst editorConfig = { placeholder: \"请输入内容...\", MENU_CONF: {} };\n\n// 更多详细配置看 https://www.wangeditor.com/v5/menu-config.html#%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87\neditorConfig.MENU_CONF[\"uploadImage\"] = {\n  // 服务端上传地址，根据实际业务改写\n  server: \"\",\n  // form-data 的 fieldName，根据实际业务改写\n  fieldName: \"file\",\n  // 选择文件时的类型限制，根据实际业务改写\n  allowedFileTypes: [\"image/png\", \"image/jpg\", \"image/jpeg\"],\n  // 自定义插入图片\n  customInsert(res: any, insertFn) {\n    // res.data.url是后端返回的图片地址，根据实际业务改写\n    if (res.data.url) {\n      setTimeout(() => {\n        // insertFn插入图片进编辑器\n        insertFn(res.data.url);\n      }, 2000);\n    }\n  }\n};\n\nconst handleCreated = editor => {\n  // 记录 editor 实例，重要！\n  editorRef.value = editor;\n};\n\n// 组件销毁时，也及时销毁编辑器\nonBeforeUnmount(() => {\n  const editor = editorRef.value;\n  if (editor == null) return;\n  editor.destroy();\n});\n</script>\n\n<template>\n  <div class=\"wangeditor\">\n    <Toolbar\n      :editor=\"editorRef\"\n      :defaultConfig=\"toolbarConfig\"\n      :mode=\"mode\"\n      style=\"border-bottom: 1px solid #ccc\"\n    />\n    <Editor\n      v-model=\"valueHtml\"\n      :defaultConfig=\"editorConfig\"\n      :mode=\"mode\"\n      style=\"height: 500px; overflow-y: hidden\"\n      @onCreated=\"handleCreated\"\n    />\n  </div>\n</template>\n"],"names":["mode","editorRef","shallowRef","valueHtml","ref","toolbarConfig","editorConfig","res","insertFn","handleCreated","editor","onBeforeUnmount"],"mappings":"yJASMA,EAAO,4DAEb,MAAMC,EAAYC,IAGZC,EAAYC,EAChB,kCAAA,EAEIC,EAAqB,CAAE,YAAa,cACpCC,EAAe,CAAE,YAAa,WAAY,UAAW,CAAG,CAAA,EAGjDA,EAAA,UAAU,YAAiB,CAEtC,OAAQ,GAER,UAAW,OAEX,iBAAkB,CAAC,YAAa,YAAa,YAAY,EAEzD,aAAaC,EAAUC,EAAU,CAE3BD,EAAI,KAAK,KACX,WAAW,IAAM,CAENC,EAAAD,EAAI,KAAK,GAAG,GACpB,GAAI,CAEX,CAAA,EAGF,MAAME,EAA0BC,GAAA,CAE9BT,EAAU,MAAQS,CAAA,EAIpB,OAAAC,EAAgB,IAAM,CACpB,MAAMD,EAAST,EAAU,MACrBS,GAAU,MACdA,EAAO,QAAQ,CAAA,CAChB"}